(function(){"use strict";var globalThis=new Function("return this;")();globalThis.globalThis=globalThis;var __commonJS=function(e,t){return function(){return t||e((t={exports:{}}).exports,t),t.exports}},require_core=__commonJS((function(e,t){function r(){}var n=null,o={};t.exports=function(e){var t=e.setTimeout;function a(e){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("Promise constructor's argument is not a function");this._deferredState=0,this._state=0,this._value=null,this._deferreds=null,e!==r&&l(e,this)}function i(e,r){for(;3===e._state;)e=e._value;if(a._onHandle&&a._onHandle(e),0===e._state)return 0===e._deferredState?(e._deferredState=1,void(e._deferreds=r)):1===e._deferredState?(e._deferredState=2,void(e._deferreds=[e._deferreds,r])):void e._deferreds.push(r);!function(e,r){t((function(){var t=1===e._state?r.onFulfilled:r.onRejected;if(null!==t){var a=function(e,t){try{return e(t)}catch(e){return n=e,o}}(t,e._value);a===o?c(r.promise,n):s(r.promise,a)}else 1===e._state?s(r.promise,e._value):c(r.promise,e._value)}))}(e,r)}function s(e,t){if(t===e)return c(e,new TypeError("A promise cannot be resolved with itself."));if(t&&("object"==typeof t||"function"==typeof t)){var r=function(e){try{return e.then}catch(e){return n=e,o}}(t);if(r===o)return c(e,n);if(r===e.then&&t instanceof a)return e._state=3,e._value=t,void p(e);if("function"==typeof r)return void l(r.bind(t),e)}e._state=1,e._value=t,p(e)}function c(e,t){e._state=2,e._value=t,a._onReject&&a._onReject(e,t),p(e)}function p(e){if(1===e._deferredState&&(i(e,e._deferreds),e._deferreds=null),2===e._deferredState){for(var t=0;t<e._deferreds.length;t++)i(e,e._deferreds[t]);e._deferreds=null}}function u(e,t,r){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.promise=r}function l(e,t){var r=!1,a=function(e,t,r){try{e(t,r)}catch(e){return n=e,o}}(e,(function(e){r||(r=!0,s(t,e))}),(function(e){r||(r=!0,c(t,e))}));r||a!==o||(r=!0,c(t,n))}return a._onHandle=null,a._onReject=null,a._noop=r,a.prototype.then=function(e,t){if(this.constructor!==a)return function(e,t,n){return new e.constructor((function(o,s){var c=new a(r);c.then(o,s),i(e,new u(t,n,c))}))}(this,e,t);var n=new a(r);return i(this,new u(e,t,n)),n},a}})),require_es6_extensions=__commonJS((function(e,t){t.exports=function(e){var t=s(!0),r=s(!1),n=s(null),o=s(void 0),a=s(0),i=s("");function s(t){var r=new e(e._noop);return r._state=1,r._value=t,r}e.resolve=function(c){if(c instanceof e)return c;if(null===c)return n;if(void 0===c)return o;if(!0===c)return t;if(!1===c)return r;if(0===c)return a;if(""===c)return i;if("object"==typeof c||"function"==typeof c)try{var p=c.then;if("function"==typeof p)return new e(p.bind(c))}catch(t){return new e((function(e,r){r(t)}))}return s(c)};var c=function(e){return"function"==typeof Array.from?(c=Array.from,Array.from(e)):(c=function(e){return Array.prototype.slice.call(e)},Array.prototype.slice.call(e))};return e.all=function(t){var r=c(t);return new e((function(t,n){if(0===r.length)return t([]);var o=r.length;function a(i,s){if(s&&("object"==typeof s||"function"==typeof s)){if(s instanceof e&&s.then===e.prototype.then){for(;3===s._state;)s=s._value;return 1===s._state?a(i,s._value):(2===s._state&&n(s._value),void s.then((function(e){a(i,e)}),n))}var c=s.then;if("function"==typeof c)return void new e(c.bind(s)).then((function(e){a(i,e)}),n)}r[i]=s,0==--o&&t(r)}for(var i=0;i<r.length;i++)a(i,r[i])}))},e.reject=function(t){return new e((function(e,r){r(t)}))},e.race=function(t){return new e((function(r,n){c(t).forEach((function(t){e.resolve(t).then(r,n)}))}))},e.prototype.catch=function(e){return this.then(null,e)},e.prototype.done=function(e,t){var r=arguments.length?this.then.apply(this,arguments):this;r.then(null,(function(e){setTimeout((function(){throw e}),0)}))},e.prototype.finally=function(t){return this.then((function(r){return e.resolve(t()).then((function(){return r}))}),(function(r){return e.resolve(t()).then((function(){throw r}))}))},e}})),require_rejection_tracking=__commonJS((function(e,t){t.exports=function(e,t,r){var n=[ReferenceError,TypeError,RangeError],o=!1;function a(){o=!1,e._onHandle=null,e._onReject=null}function i(e,t){return t.some((function(t){return e instanceof t}))}return{enable:function(s){s=s||{},o&&a(),o=!0;var c=0,p=0,u={};function l(e){(s.allRejections||i(u[e].error,s.whitelist||n))&&(u[e].displayId=p++,s.onUnhandled?(u[e].logged=!0,s.onUnhandled(u[e].displayId,u[e].error)):(u[e].logged=!0,function(e,t){console.warn("Possible Unhandled Promise Rejection (id: "+e+"):"),((t&&(t.stack||t))+"").split("\n").forEach((function(e){console.warn("  "+e)}))}(u[e].displayId,u[e].error)))}return e._onHandle=function(e){var t;2===e._state&&u[e._rejectionId]&&(u[e._rejectionId].logged?(t=e._rejectionId,u[t].logged&&(s.onHandled?s.onHandled(u[t].displayId,u[t].error):u[t].onUnhandled||(console.warn("Promise Rejection Handled (id: "+u[t].displayId+"):"),console.warn('  This means you can ignore any previous messages of the form "Possible Unhandled Promise Rejection" with id '+u[t].displayId+".")))):r&&r(u[e._rejectionId].timeout),delete u[e._rejectionId])},e._onReject=function(e,r){0===e._deferredState&&(e._rejectionId=c++,u[e._rejectionId]={displayId:null,error:r,timeout:t(l.bind(null,e._rejectionId),i(r,n)?100:2e3),logged:!1})},e},disable:a}}})),require_src=__commonJS((function(e,t){var r=require_core(),n=require_es6_extensions(),o=require_rejection_tracking();new Function("return this")().getPromise=t.exports.getPromise=function(e){var t=e.setTimeout,a=e.onUnhandled,i=e.clearTimeout,s=function(e){return t(e,0)},c=r({setTimeout:s});return c=n(c),c=o(c,s,i).enable({allRejections:!0,onUnhandled:a})}}));require_src();var runtime=function(e){var t,r=Object.prototype,n=r.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",s=o.toStringTag||"@@toStringTag";function c(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,r){return e[t]=r}}function p(e,t,r,n){var o=t&&t.prototype instanceof y?t:y,a=Object.create(o.prototype),i=new S(n||[]);return a._invoke=function(e,t,r){var n=l;return function(o,a){if(n===d)throw new Error("Generator is already running");if(n===h){if("throw"===o)throw a;return k()}for(r.method=o,r.arg=a;;){var i=r.delegate;if(i){var s=w(i,r);if(s){if(s===v)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(n===l)throw n=h,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n=d;var c=u(e,t,r);if("normal"===c.type){if(n=r.done?h:f,c.arg===v)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n=h,r.method="throw",r.arg=c.arg)}}}(e,r,i),a}function u(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=p;var l="suspendedStart",f="suspendedYield",d="executing",h="completed",v={};function y(){}function m(){}function _(){}var g={};g[a]=function(){return this};var E=Object.getPrototypeOf,b=E&&E(E(D([])));b&&b!==r&&n.call(b,a)&&(g=b);var A=_.prototype=y.prototype=Object.create(g);function x(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function C(e,t){function r(o,a,i,s){var c=u(e[o],e,a);if("throw"!==c.type){var p=c.arg,l=p.value;return l&&"object"==typeof l&&n.call(l,"__await")?t.resolve(l.__await).then((function(e){r("next",e,i,s)}),(function(e){r("throw",e,i,s)})):t.resolve(l).then((function(e){p.value=e,i(p)}),(function(e){return r("throw",e,i,s)}))}s(c.arg)}var o;this._invoke=function(e,n){function a(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(a,a):a()}}function w(e,r){var n=e.iterator[r.method];if(n===t){if(r.delegate=null,"throw"===r.method){if(e.iterator.return&&(r.method="return",r.arg=t,w(e,r),"throw"===r.method))return v;r.method="throw",r.arg=new TypeError("The iterator does not provide a 'throw' method")}return v}var o=u(n,e.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,v;var a=o.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,v):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function I(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function R(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function S(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(I,this),this.reset(!0)}function D(e){if(e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}return{next:k}}function k(){return{value:t,done:!0}}return m.prototype=A.constructor=_,_.constructor=m,m.displayName=c(_,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,_):(e.__proto__=_,c(e,s,"GeneratorFunction")),e.prototype=Object.create(A),e},e.awrap=function(e){return{__await:e}},x(C.prototype),C.prototype[i]=function(){return this},e.AsyncIterator=C,e.async=function(t,r,n,o,a){void 0===a&&(a=Promise);var i=new C(p(t,r,n,o),a);return e.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},x(A),c(A,s,"Generator"),A[a]=function(){return this},A.toString=function(){return"[object Generator]"},e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=D,S.prototype={constructor:S,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(R),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return s.type="throw",s.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],s=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),p=n.call(i,"finallyLoc");if(c&&p){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!p)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,v):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),R(r),v}},"catch":function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;R(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:D(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),v}},e}("object"==typeof module?module.exports:{});try{regeneratorRuntime=runtime}catch(e){Function("r","regeneratorRuntime = r")(runtime)}var extendStatics=function(e,t){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)};function __extends(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}extendStatics(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}var __assign=function(){return(__assign=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},e_1,_a;function __values(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function __read(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,a=r.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(n=a.next()).done;)i.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=a.return)&&r.call(a)}finally{if(o)throw o.error}}return i}function __spreadArray(e,t){for(var r=0,n=t.length,o=e.length;r<n;r++,o++)e[o]=t[r];return e}var lifeCycles=["onLoad","onShow","onHide","onReady","onDestroy","onError","onFirstScreen"],lifeCycleFun={},noop=function(){},ErrorCode;try{for(var lifeCycles_1=__values(lifeCycles),lifeCycles_1_1=lifeCycles_1.next();!lifeCycles_1_1.done;lifeCycles_1_1=lifeCycles_1.next()){var name=lifeCycles_1_1.value;lifeCycleFun[name]=noop}}catch(e){e_1={error:e}}finally{try{lifeCycles_1_1&&!lifeCycles_1_1.done&&(_a=lifeCycles_1.return)&&_a.call(lifeCycles_1)}finally{if(e_1)throw e_1.error}}!function(e){e[e.SUCCESS=0]="SUCCESS",e[e.UNKNOWN=1]="UNKNOWN",e[e.NODE_NOT_FOUND=2]="NODE_NOT_FOUND",e[e.METHOD_NOT_FOUND=3]="METHOD_NOT_FOUND",e[e.PARAM_INVALID=4]="PARAM_INVALID",e[e.SELECTOR_NOT_SUPPORTED=5]="SELECTOR_NOT_SUPPORTED"}(ErrorCode||(ErrorCode={}));var LYNX_CORE={filename:"lynx_core",slot:"unknown_commit_hash"},componentLifeCycles=["created","attached","ready","moved","detached"],DEFAULT_ENTRY="__CARD__",CARD_CONFIG_STR="__card_config_",CARD_CONFIG_THEME="theme",CARD_CONFIG_THEME_UPDATED="onThemeChanged",REACT_JS_STATE_VERSION_KEY="$$jsStateVersion",REACT_NATIVE_STATE_VERSION_KEY="$$nativeStateVersion",ShareDataSubject=function(){function e(){this.observersFunc=[]}return e.prototype.registerObserver=function(e){if(this.observersFunc.includes(e))return nativeConsole.log("Subject: Observer has been attached already.");this.observersFunc.push(e)},e.prototype.removeObserver=function(e){var t=this.observersFunc.indexOf(e);if(-1===t)return nativeConsole.log("Subject: Nonexistent observer.");this.observersFunc.splice(t,1)},e.prototype.notifyDataChange=function(e){var t,r;try{for(var n=__values(this.observersFunc),o=n.next();!o.done;o=n.next()){var a=o.value;if("function"==typeof a)try{a(e)}catch(e){nativeConsole.log("SharedData change and notifyDataChange error info:"+e)}}}catch(e){t={error:e}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(t)throw t.error}}},e}(),_global=function(){return this||(0,eval)("this")}();_global.multiApps={},_global.currentAppId="",_global.globComponentRegistPath="",_global.sharedData={},_global.globDynamicComponentEntry=DEFAULT_ENTRY,_global.shareDataSubject=new ShareDataSubject,_global.TaroLynx={},_global.bundleSupportLoadScript=!0;var loadScript=_global.loadScript,EventEmitter=function(){function e(e){this._internal_callNativeModule=e,this._events=new Map}return e.prototype.addListener=function(e,t,r){var n=this._events.get(e);"keyboardstatuschanged"==e&&this._internal_callNativeModule&&this._internal_callNativeModule("LynxSetModule","switchKeyBoardDetect",[!0]),n?n.push({listener:t,context:r}):this._events.set(e,[{listener:t,context:r}])},e.prototype.removeListener=function(e,t){var r,n;if("function"!=typeof t)throw new Error("removeListener only takes instances of Function");var o=this._events.get(e),a=!1,i=0;if(Array.isArray(o)){try{for(var s=__values(o),c=s.next();!c.done;c=s.next()){if(t===c.value.listener){a=!0;break}i++}}catch(e){r={error:e}}finally{try{c&&!c.done&&(n=s.return)&&n.call(s)}finally{if(r)throw r.error}}a&&o.splice(i,1)}"keyboardstatuschanged"==e&&this._internal_callNativeModule&&this._internal_callNativeModule("LynxSetModule","switchKeyBoardDetect",[!1])},e.prototype.emit=function(e,t){var r,n,o=this._events.get(e);if(Array.isArray(o))try{for(var a=__values(o),i=a.next();!i.done;i=a.next()){var s=i.value,c=s.listener,p=s.context;"function"==typeof c&&c.apply(p||this,t)}}catch(e){r={error:e}}finally{try{i&&!i.done&&(n=a.return)&&n.call(a)}finally{if(r)throw r.error}}else nativeConsole.warn("emit event "+e+" is not register.")},e.prototype.removeAllListerners=function(e){this._events.delete(e)},e.prototype.removeAllListeners=function(e){this._events.delete(e)},e.prototype.trigger=function(e,t){var r,n,o=this._events.get(e);if(Array.isArray(o)){"string"==typeof t&&(t=JSON.parse(t));try{for(var a=__values(o),i=a.next();!i.done;i=a.next()){var s=i.value,c=s.listener,p=s.context;"function"==typeof c&&c.call(p||this,t)}}catch(e){r={error:e}}finally{try{i&&!i.done&&(n=a.return)&&n.call(a)}finally{if(r)throw r.error}}}else nativeConsole.warn("trigger event "+e+" is not register.")},e.prototype.toggle=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];this.emit(e,t)},e}(),BaseError=function(e){function t(t,r){var n=e.call(this,t)||this;return r&&(n.stack=r),n}return __extends(t,e),t}(Error),InternalError=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.kind="INTERNAL_ERROR",t}return __extends(t,e),t}(BaseError),UserError=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.kind="USER_ERROR",t}return __extends(t,e),t}(BaseError),UserValidateError=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.name="USER_VALIDATE_ERROR",t}return __extends(t,e),t}(UserError),UserRuntimeError=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.name="USER_RUNTIME_ERROR",t}return __extends(t,e),t}(UserError),InternalRuntimeError=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.name="INTERNAL_RUNTIME_ERROR",t}return __extends(t,e),t}(InternalError),InvokeError=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.name="INVOKE_ERROR",t}return __extends(t,e),t}(InternalError),AppServiceEngineKnownError=function(e){function t(t){var r=e.call(this,"APP-SERVICE-Engine: "+t)||this;return r.type="AppServiceEngineKnownError",r}return __extends(t,e),t}(Error),ttConsole=_global.nativeConsole,LynxJSBI=_global.LynxJSBI;function hasProperty(e,t){return Object.prototype.hasOwnProperty.call(e||{},t)}function getDataType(e){var t=typeof e;return"object"!==t?t:Array.isArray(e)?"array":null==e?"null":e instanceof Date?"date":e instanceof RegExp?"regExp":"object"}function isString(e){return"string"===getDataType(e)}function isObject(e){return"object"===getDataType(e)}function isFunction(e){return"function"===getDataType(e)}function isNull(e){return null===e}function isUndefined(e){return void 0===e}function isNullOrUndef(e){return isUndefined(e)||isNull(e)}var ThirdScriptError=function(e){function t(t){var r=e.call(this,""+t)||this;return r.type="ThirdScriptError",r}return __extends(t,e),t}(Error),AppServiceSdkKnownError=function(e){function t(t){var r=e.call(this,"APP-SERVICE-SDK: + "+t)||this;return r.type="AppServiceSdkKnownError",r}return __extends(t,e),t}(Error);function guid(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}))}function noop$1(){}function forEachRight(e,t){if(!Array.isArray(e))throw new Error("forEachRight ERROR: first params must be array.");for(var r=e.length-1;r>=0;r--)t(e[r])}function callbackMerge(e){if(Array.isArray(e))for(var t=0,r=e.length;t<r;++t)e[t]()}function isEmptyObject(e){return!(!e||!Object.keys(e).length)}function formatException(e){var t=eventFromException(e);return t.sdk=addSdkInfo(),t.platform="javascript",t}function addSdkInfo(){return{name:"sentry.javascript.browser",packages:[{name:"npm:@sentry/browser",version:"5.15.5"}],version:"5.15.5",integrations:["InboundFilters","FunctionToString","Breadcrumbs","GlobalHandlers","LinkedErrors","UserAgent"]}}function eventFromException(e){var t;return isError(e)&&(addExceptionMechanism(t=eventFromStacktrace(computeStackTrace(e)),{handled:!0,type:"generic"}),t.level="error"),t}function addExceptionMechanism(e,t){void 0===t&&(t={});try{e.exception.values[0].mechanism=e.exception.values[0].mechanism||{},Object.keys(t).forEach((function(r){e.exception.values[0].mechanism[r]=t[r]}))}catch(e){}}var UNKNOWN_FUNCTION="?",chrome=/^\s*at (?:(.*?) ?\()?((?:file|https?|blob|chrome-extension|address|native|eval|webpack|<anonymous>|[-a-z]+:|.*bundle|\/).*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,gecko=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:file|https?|blob|chrome|webpack|resource|moz-extension).*?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js))(?::(\d+))?(?::(\d+))?\s*$/i,winjs=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:file|ms-appx|https?|webpack|blob):.*?):(\d+)(?::(\d+))?\)?\s*$/i,geckoEval=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,chromeEval=/\((\S*)(?::(\d+))(?::(\d+))\)/;function computeStackTrace(e){var t=null,r=null==e?void 0:e.framesToPop;try{if(t=computeStackTraceFromStackProp(e))return popFrames(t,r)}catch(e){}return{message:extractMessage(e),name:null==e?void 0:e.name,stack:[],failed:!0}}function computeStackTraceFromStackProp(e){var t,r,n,o=[],a=e.stack.split("\n");if(!e||!e.stack)return null;for(var i=0;i<a.length;++i){if(r=chrome.exec(a[i])){var s=r[2]&&0===r[2].indexOf("native");r[2]&&0===r[2].indexOf("eval")&&(t=chromeEval.exec(r[2]))&&(r[2]=t[1],r[3]=t[2],r[4]=t[3]),n={url:r[2]&&0===r[2].indexOf("address at ")?r[2].substr("address at ".length):r[2],func:r[1]||UNKNOWN_FUNCTION,args:s?[r[2]]:[],line:r[3]?+Number(r[3]):null,column:r[4]?+Number(r[4]):null}}else if(r=winjs.exec(a[i]))n={url:r[2],func:r[1]||UNKNOWN_FUNCTION,args:[],line:+Number(r[3]),column:r[4]?+Number(r[4]):null};else{if(!(r=gecko.exec(a[i])))continue;r[3]&&r[3].indexOf(" > eval")>-1&&(t=geckoEval.exec(r[3]))?(r[1]=r[1]||"eval",r[3]=t[1],r[4]=t[2],r[5]=""):0!==i||r[5]||void 0===e.columnNumber||(o[0].column=e.columnNumber+1),n={url:r[3],func:r[1]||UNKNOWN_FUNCTION,args:r[2]?r[2].split(","):[],line:r[4]?+Number(r[4]):null,column:r[5]?+Number(r[5]):null}}!n.func&&n.line&&(n.func=UNKNOWN_FUNCTION),o.push(n)}return o.length?{message:extractMessage(e),name:e.name,stack:o}:null}function extractMessage(e){var t=null==e?void 0:e.message;return t?t.error&&"string"==typeof t.error.message?t.error.message:t:"No error message"}function popFrames(e,t){try{return Object.assign({},e,{stack:e.stack.slice(t)})}catch(t){return e}}function eventFromStacktrace(e){return{exception:{values:[exceptionFromStacktrace(e)]}}}function isError(e){switch(Object.prototype.toString.call(e)){case"[object Error]":case"[object Exception]":case"[object DOMException]":return!0;default:return isInstanceOf(e,Error)}}function isInstanceOf(e,t){try{return e instanceof t}catch(e){return!1}}function exceptionFromStacktrace(e){var t=prepareFramesForEvent(e.stack),r={type:e.name,value:e.message};return(null==t?void 0:t.length)&&(r.stacktrace={frames:t}),void 0===r.type&&""===r.value&&(r.value="Unrecoverable error caught"),r}function prepareFramesForEvent(e){if(!e||!e.length)return[];var t=e,r=t[0].func||"",n=t[t.length-1].func||"";return-1===r.indexOf("captureMessage")&&-1===r.indexOf("captureException")||(t=t.slice(1)),-1!==n.indexOf("sentryWrapped")&&(t=t.slice(0,-1)),t.map((function(e){return{colno:null===e.column?void 0:e.column,filename:e.url||t[0].url,function:e.func||"?",in_app:!0,lineno:null===e.line?void 0:e.line}})).slice(0,50).reverse()}var RUNTIME=function(e){return e.filename};function collectTags(e,t,r){return{lib_version:"unknown_build_version",version_code:"unknown_version",run_type:RUNTIME(r),extra:e,error_type:t}}function sentryReport(e,t,r){var n=e.rawError;try{nativeConsole.log("prod sentry data:",e),t.reportException(JSON.stringify(e),n.stack)}catch(e){nativeConsole.error("sentryReport error:",null==e?void 0:e.message)}}function reportError(e,t,r){var n=null!=r?r:{},o=n.runType,a=void 0===o?LYNX_CORE:o,i=n.originError,s=e.stack;e.stack=formatStack(e,a);var c=formatException(e);try{var p=collectTags(e.message,e.name,a),u=appendTags(e,createBeforeSend(c,a,null==r?void 0:r.proxy),p,a);u.rawError={stack:s,message:e.message},sentryReport(u,t,i)}catch(e){nativeConsole.error("reportError err:\n",e)}}function legacyReportError(e,t,r,n,o){return void 0===r&&(r=LYNX_CORE),reportError(e,t,{runType:r,originError:n,proxy:o})}function reportThrowError(e){var t=e.error,r=e.nativeApp,n=e.runType,o=void 0===n?LYNX_CORE:n;reportError(t,r,{originError:e.rawError,runType:o,proxy:e.proxy})}function appendTags(e,t,r,n){var o="USER_ERROR"===e.kind?"USER_ERROR":"INTERNAL_ERROR";return{sentry:__assign(__assign({},t),{tags:r}),pid:o,url:"file://"+RUNTIME(n)+".js"}}function formatStack(e,t){return e.stack?e.stack.split("\n").filter((function(e){return e.split(":").length>2})).map((function(e){if(e.includes("file://"))return e;var r=t.filename+".js";return e.replace(r,"file://"+r)})).join("\n"):""}function createBeforeSend(e,t,r){var n,o,a,i=null===(a=null===(o=null===(n=e.exception)||void 0===n?void 0:n.values)||void 0===o?void 0:o[0])||void 0===a?void 0:a.stacktrace;return(null==i?void 0:i.frames)&&i.frames.forEach((function(e){var n=t.slot,o=t.filename;-1!==e.filename.indexOf(o)?(e.filename=o+"."+n+".js",e.release=n):e.release=null==r?void 0:r.__sourcemap__release__})),e}function wrapUserFunction(e,t,r,n){return void 0===n&&(n=LYNX_CORE),isFunction(r)?wrapFunction("USER_ERROR",e,r,t,n):noop$1}function wrapFunction(e,t,r,n,o){return void 0===e&&(e="INTERNAL_ERROR"),function(){for(var a=[],i=0;i<arguments.length;i++)a[i]=arguments[i];try{return r.apply(this,a)}catch(a){var s=t+" \n"+a.message;"onError"!==r.name&&n.onError("Card "+r.name+" exec error:"+s+"\n"+a.stack);var c="INTERNAL_ERROR"===e?new InternalRuntimeError(s,a.stack):new UserRuntimeError(s,a.stack);nativeConsole.log("wrapError-"+t,c),reportError(c,n._nativeApp,{runType:o,proxy:null==n?void 0:n.__proxy})}}}function wrapInnerFunction(e,t,r,n){return void 0===n&&(n=LYNX_CORE),isFunction(r)?wrapFunction("INTERNAL_ERROR",e,r,t,n):noop$1}var shallowClone=function(e){var t={};return isObject(e)&&Object.keys(e).forEach((function(r){t[r]=e[r]})),t},shallowMergeEx=function(e,t,r){void 0===r&&(r=!1);var n={};return isObject(e)&&Object.keys(e).forEach((function(t){n[t]=e[t]})),isObject(t)&&Object.keys(t).forEach((function(e){isNull(t[e])&&r||(n[e]=t[e])})),n},deepClone=function(){function e(e,t){return null!=t&&e instanceof t}var t,r,n;try{t=Map}catch(e){t=function(){}}try{r=Set}catch(e){r=function(){}}try{n=Promise}catch(e){n=function(){}}function o(a,s,c,p,u){"object"==typeof s&&(c=s.depth,p=s.prototype,u=s.includeNonEnumerable,s=s.circular);var l=[],f=[],d="undefined"!=typeof Buffer;return void 0===s&&(s=!0),void 0===c&&(c=1/0),function a(c,h){if(null===c)return null;if(0===h)return c;var v,y;if("object"!=typeof c)return c;if(e(c,t))v=new t;else if(e(c,r))v=new r;else if(e(c,n))v=new n((function(e,t){c.then((function(t){e(a(t,h-1))}),(function(e){t(a(e,h-1))}))}));else if(o.__isArray(c))v=[];else if(o.__isRegExp(c))v=new RegExp(c.source,i(c)),c.lastIndex&&(v.lastIndex=c.lastIndex);else if(o.__isDate(c))v=new Date(c.getTime());else{if(d&&Buffer.isBuffer(c))return v=Buffer.allocUnsafe?Buffer.allocUnsafe(c.length):new Buffer(c.length),c.copy(v),v;e(c,Error)?v=Object.create(c):void 0===p?(y=Object.getPrototypeOf(c),v=Object.create(y)):(v=Object.create(p),y=p)}if(s){var m=l.indexOf(c);if(-1!==m)return f[m];l.push(c),f.push(v)}for(var _ in e(c,t)&&c.forEach((function(e,t){var r=a(t,h-1),n=a(e,h-1);v.set(r,n)})),e(c,r)&&c.forEach((function(e){var t=a(e,h-1);v.add(t)})),c){var g=void 0;y&&(g=Object.getOwnPropertyDescriptor(y,_)),g&&null==g.set||(v[_]=a(c[_],h-1))}if(Object.getOwnPropertySymbols){var E=Object.getOwnPropertySymbols(c);for(_=0;_<E.length;_++){var b=E[_];(!(x=Object.getOwnPropertyDescriptor(c,b))||x.enumerable||u)&&(v[b]=a(c[b],h-1),x.enumerable||Object.defineProperty(v,b,{enumerable:!1}))}}if(u){var A=Object.getOwnPropertyNames(c);for(_=0;_<A.length;_++){var x,C=A[_];(null==(x=Object.getOwnPropertyDescriptor(c,C))?void 0:x.enumerable)||(v[C]=a(c[C],h-1),Object.defineProperty(v,C,{enumerable:!1}))}}return v}(a,c)}function a(e){return Object.prototype.toString.call(e)}function i(e){var t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),t}return o.clonePrototype=function(e){if(null===e)return null;var t=function(){};return t.prototype=e,new t},o.__objToStr=a,o.__isDate=function(e){return"object"==typeof e&&"[object Date]"===a(e)},o.__isArray=function(e){return"object"==typeof e&&"[object Array]"===a(e)},o.__isRegExp=function(e){return"object"==typeof e&&"[object RegExp]"===a(e)},o.__getRegExpFlags=i,o}(),NodeRef=function(){function e(e,t,r,n,o){this._selectorName=r,n&&n.length>0?this._ancestorSelectorNames=__spreadArray([],__read(n)):this._ancestorSelectorNames=[],this._rootComponentId=t,this._nativeLynxUIModule=e,this._isCallByRefId=o}return e.prototype.getNodeRef=function(t){return new e(this._nativeLynxUIModule,this._rootComponentId,t,__spreadArray(__spreadArray([],__read(this._ancestorSelectorNames)),[this._selectorName]),this._isCallByRefId)},e.prototype.invoke=function(e){this._nativeLynxUIModule.invokeUIMethod(this._rootComponentId,__spreadArray(__spreadArray([],__read(this._ancestorSelectorNames)),[this._selectorName]),e.method,Object.assign({_isCallByRefId:this._isCallByRefId},e.params),(function(t){0===t.code?e.success&&e.success(t.data):e.fail&&e.fail(t)}))},e.prototype.scrollIntoView=function(e){void 0===e&&(e=!0);var t={};if("boolean"==typeof e)t=e?{behavior:"auto",block:"start",inline:"nearest"}:{behavior:"auto",block:"end",inline:"nearest"};else{if("object"!=typeof e)throw new Error("scrollIntoView only support boolean or object");t=e}this.invoke({method:"scrollIntoView",params:{scrollIntoViewOptions:t},fail:function(e){nativeConsole.error("NodeRef.scrollIntoView failed","ErrorCode: "+e.code)}})},e}(),isNativeConsoleHasALog;function alog(e){void 0===isNativeConsoleHasALog&&(isNativeConsoleHasALog="function"==typeof nativeConsole.alog),isNativeConsoleHasALog&&nativeConsole.alog("[LynxJSSDK]"+e)}var compPrefix=1,globalId=1,propsIdMap={},nextTick;function genCompPrefix(){return String(compPrefix++)}function genPropsId(e){return propsIdMap[e]||(propsIdMap[e]=String(globalId++)),propsIdMap[e]}"iOS"===(_global.SystemInfo||{}).platform?nextTick=function(e){"function"==typeof e&&e()}:eval("nextTick = Promise.resolve().then.bind(Promise.resolve())");var nextTick$1=nextTick,dataTypeSet=new Set(["string","number","array","object","boolean","null","function"]),reserveKey=new Set(["__globalProps","SystemInfo"]),deepEqual=function(e,t){var r=getDataType(e);if(r===getDataType(t)){if("array"===r){if(e.length!==t.length)return!1;var n=!0;return e.some((function(e,r){return!(n=deepEqual(e,t[r]))})),n}if("object"===r){var o=!0,a=Object.keys(e);return a.length!==Object.keys(t).length?o=!1:(a.some((function(r){return!(o=deepEqual(e[r],t[r]))})),o)}return e===t}return!1},diffData=function(e,t,r){var n={};if(e===t)return n;if(isObject(t)){var o=isObject(e),a=Object.keys(t);if(a.length)(r&&r.length?r:a).forEach((function(r){var a=t[r];dataTypeSet.has(getDataType(a))&&(o&&deepEqual(e[r],a)||(n[r]=a))}))}return n},filterReactComponentData=function(e){var t={};return isObject(e)&&Object.keys(e).forEach((function(r){var n=e[r],o=getDataType(n);dataTypeSet.has(o)&&!reserveKey.has(r)&&(t[r]=n)})),t},Animation=function(){function e(t){this.effect=t,this.id="__lynx-inner-js-animation-"+e.count++}return e.prototype.cancel=function(){this.effect.target.canceleAnimate(this)},e.prototype.pause=function(){this.effect.target.pauseAnimate(this)},e.prototype.play=function(){this.effect.target.playAnimate(this)},e.count=0,e}(),KeyframeEffect=function(e,t,r){this.target=e,this.keyframes=t,this.options=r},Element=function(){function e(e,t,r){this._root=e,this._idSelector="#"+t,this._lynx=r,this._element=void 0}return e.prototype.ensureElement=function(){this._element||(this._element=this._lynx.createElement(this._root,this._idSelector))},e.prototype.animate=function(e,t){this.ensureElement();var r=new Animation(new KeyframeEffect(this,e,t));return this._element.animate(0,r.id,e,t),r},e.prototype.playAnimate=function(e){this._element.animate(1,e.id,void 0,void 0)},e.prototype.pauseAnimate=function(e){this._element.animate(2,e.id,void 0,void 0)},e.prototype.canceleAnimate=function(e){this._element.animate(3,e.id,void 0,void 0)},e.prototype.finishAnimate=function(e){this._element.animate(4,e.id,void 0,void 0)},e.prototype.setProperty=function(e,t){this.ensureElement(),this._element.setProperty(e,t)},e}(),ReactComponent=function(){function e(e){void 0===e&&(e={}),this.prevProps={},this.prevState={},this.nextProps={},this.nextState={},this.$init=!1,this.$cardInit=!1,this.$prefix="",this.componentId="",this.componentPath="",this.entryName="",this.globalProps=null,this.$jsStateVersion=0,this.$nativeStateVersion=0,this.state={},this.props=e,this.prevProps={},this.prevState={},this._microTaskPending=!1,this._queue=[],this._cbs=[],this.$prefix=genCompPrefix(),this.setComponentConfig(this.constructor),this.$refs=[],this.$pureData={},this._stateQueue=[]}return Object.defineProperty(e.prototype,"nativeApp",{get:function(){return this._nativeApp},enumerable:!1,configurable:!0}),e.prototype.executeJSRender=function(){var e=this._createData();return this.bindRef(),e},e.prototype.bindRef=function(){var e=this;!this.$refs||this.$refs.length<1||this.$refs.forEach((function(t){e.bindComponent(t)}))},e.prototype.bindComponent=function(e){var t=null;"native"===e.type?t=this.getNodeRef(e.refId,!0):"com"===e.type&&isString(this.$pureData[e.refId])&&(t=this._reactAppInstance._getComponent(this.$pureData[e.refId]));var r=typeof e.ref;isObject(t)&&("function"===r?e.ref.call(this,t):"object"===r&&"current"in e.ref&&(e.ref.current=t,e.ref.id=this.componentId))},e.prototype.bindSingleRef=function(e){var t=this.$refs.find((function(t){return t.refId===e}));isObject(t)&&this.bindComponent(t)},e.prototype.updateTheme=function(e,t){void 0===t&&(t=!1);var r=this;try{var n=getDataType(e);if("object"!==n)throw new Error("updateTheme's first param must be object, you pass "+n);var o={};t?Object.assign(o,e):Object.assign(o,r.theme,e),Object.keys(o).forEach((function(e){o[e]||delete o[e]})),r._nativeApp.updateData({__card_config_:{theme:o}}),r[CARD_CONFIG_THEME]=o,"function"==typeof r[CARD_CONFIG_THEME_UPDATED]&&r[CARD_CONFIG_THEME_UPDATED](o)}catch(e){var a=e||{},i=a.message,s=a.stack,c=new InternalRuntimeError("updateTheme error: "+i,s);reportThrowError({error:c,nativeApp:r._nativeApp,rawError:e,proxy:void 0}),r._reactAppInstance.publishGlobalError(c,"updateTheme error: "+i,s),r.componentDidCatch&&r.componentDidCatch(i)}},e.prototype.setState=function(e,t){var r,n=this,o=null;try{var a=getDataType(e);if("function"===a)o=e(n.state,n.props);else{if("object"!==a)throw new Error("setState's first param must be object/function, you pass "+a);o=e}var i=getDataType(t);if(t&&"function"!==i)throw new Error("setState's second param must be function, you pass "+i);(null===(r=this._reactAppInstance.lynx._switches)||void 0===r?void 0:r.asyncSetState)?this.setStateInternalAsync(o,t):this.setStateInternal(o,t)}catch(e){var s=e||{},c=s.message,p=s.stack,u=new InternalRuntimeError("setState error: "+c,p);reportThrowError({error:u,nativeApp:n._nativeApp,rawError:e,proxy:void 0}),n._reactAppInstance.publishGlobalError(u,"setState error: "+c,p),n.componentDidCatch&&n.componentDidCatch(c)}},e.prototype.setStateInternalAsync=function(e,t){var r=this;this._stateQueue.push({state:e,callback:t}),this._microTaskPending||(this._microTaskPending=!0,this._reactAppInstance.resolvedPromise.then((function(){r._microTaskPending=!1;var e={},t=[];r._stateQueue.forEach((function(r){var n=r.state,o=r.callback;Object.assign(e,n),t.push(o)}));r.setStateInternal(e,(function(){t.forEach((function(e){wrapUserFunction("at setState/async",r,e).bind(r)(),r._stateQueue.shift()}))}))})))},e.prototype.setStateInternal=function(e,t){var r=this;try{this.nextProps=this.props,isFunction(this.shouldComponentUpdate)?this.nextState=deepClone(this.state):this.nextState=this.state,r.nextState=Object.assign(r.nextState,e);var n=null,o={};r.$hasDerivedFunction&&(n=r.$class.getDerivedStateFromProps(r.nextProps,r.nextState),o=diffData(this.nextState,n),r.nextState=Object.assign(r.nextState,n||{}));var a=!0;if(isFunction(this.shouldComponentUpdate)&&(a=r.shouldComponentUpdate(this.nextProps,this.nextState)),this.state=this.nextState,!a){var i=Object.assign({},e,o);return void(Object.keys(i).length&&(i.$$shouldComponentUpdate=!1,this.dataQueueUpdate(r,i,wrapUserFunction("at setState/dataQueueUpdate",r,t).bind(r))))}var s=r.executeJSRender(),c=diffData(this.state,s);r.state=Object.assign(r.state,s);var p=Object.assign({},e,o,c);Object.keys(p).length&&this.dataQueueUpdate(r,p,wrapUserFunction("at setState/dataQueueUpdate",r,t).bind(r))}catch(e){var u=e||{},l=u.message,f=u.stack,d=new InternalRuntimeError("setState error: "+l,f);reportThrowError({error:d,nativeApp:r._nativeApp,rawError:e,proxy:void 0}),r._reactAppInstance.publishGlobalError(d,"setState error: "+l,f),r.componentDidCatch&&r.componentDidCatch(l)}},e.prototype.updateDataToNative=function(e){e&&Object.keys(e).length&&this.dataQueueUpdate(this,e,(function(){}))},e.prototype.dataQueueUpdate=function(e,t,r){var n,o=this,a=o._pendingState,i=e._queue;if(isNullOrUndef(a))o._pendingState=t;else for(var s in t)({}).hasOwnProperty.call(t,s)&&(a[s]=t[s]);this.$jsStateVersion+=1;var c=((n={})[REACT_JS_STATE_VERSION_KEY]=this.$jsStateVersion,n[REACT_NATIVE_STATE_VERSION_KEY]=this.$nativeStateVersion,n);Object.assign(o._pendingState,c),i.includes(o)||i.push(o),isFunction(r)&&(Array.isArray(o._cbs)||(o._cbs=[]),o._cbs.push(r.bind(o))),e._microTaskPending||(e._microTaskPending=!0,nextTick$1((function(){var t,r=[];for(e._microTaskPending=!1;t=i.pop();){var n=t.$type,o=t.componentId,a=t._cbs,s=(t.componentPath,t.entryName,t._pendingState),c=callbackMerge.bind(t,a);t._pendingState=null,t._cbs=[],r.push({type:n,componentId:o,data:s,callback:c})}e._nativeApp.batchedUpdateData(r)})))},e.prototype.registerModule=function(e,t){this._reactAppInstance._lazyCallableModules[e]=t},e.prototype.initJSModule=function(e){this._reactAppInstance=e,this.registerModule("GlobalEventEmitter",this._reactAppInstance.GlobalEventEmitter),this.registerModule("BDLynxAPIModule",this._reactAppInstance._BDLynxAPIModule);var t=(_global.BDLynxSDKCore||{}).registerNativeEvent;"function"==typeof t&&t(this._reactAppInstance._lazyCallableModules.BDLynxAPIModule)},e.prototype.setComponentConfig=function(e){this.$class=e,this.$hasDerivedFunction=!!isFunction(e.getDerivedStateFromProps);var t=e.__config,r=t.appInstance.lynx;this.$type=t.$type,this._nativeApp=t.appInstance.nativeApp,this._reactAppInstance=t.appInstance,this.setGlobalProps(r,t.initData),this.initJSModule(t.appInstance),this.GlobalEventEmitter=this._reactAppInstance.GlobalEventEmitter,r.getJSModule=this.getJSModule.bind(this)},e.prototype.getJSModule=function(e){return this._reactAppInstance._lazyCallableModules[e]},e.prototype.getNodeRef=function(e,t){return"component"===this.$type?new NodeRef(this._nativeApp.nativeModuleProxy.LynxUIMethodModule,this.componentId,e,[],t):new NodeRef(this._nativeApp.nativeModuleProxy.LynxUIMethodModule,"",e,[],t)},e.prototype.getNodeRefFromRoot=function(e){return new NodeRef(this._nativeApp.nativeModuleProxy.LynxUIMethodModule,"",e)},e.prototype.getElementById=function(e){return new Element(""===this.componentId?"card":this.componentId,e,this._reactAppInstance.lynx)},e.prototype.addGlobalEventListener=function(e,t,r){this.getJSModule("GlobalEventEmitter").addListener(e,t,r)},e.prototype.setSharedData=function(e,t){_global.sharedData[e]=t},e.prototype.getSharedData=function(e){return _global.sharedData[e]},e.prototype.setGlobalProps=function(e,t){e&&!e.__globalProps&&t&&t.__globalProps&&(e.__globalProps=t.__globalProps)},e.prototype.triggerEvent=function(e,t,r){void 0===t&&(t={}),void 0===r&&(r={});var n=this;try{var o=n.componentId;n._nativeApp.triggerComponentEvent(e,{eventDetail:t,eventOption:r,componentId:o})}catch(e){var a=e||{},i=a.message,s=a.stack,c=new InternalRuntimeError("trigger event error: "+(i="triggerEvent error: "+i),s);reportThrowError({error:c,nativeApp:n._nativeApp,rawError:e,proxy:void 0}),n._reactAppInstance.publishGlobalError(c,"trigger event error: "+i,s),n._reactAppInstance.onAppError(i)}},e.prototype.componentDidCatch=function(e){},e.prototype.componentDidMount=function(){},e.prototype.componentWillUnmount=function(){},e.prototype.componentDidUpdate=function(e,t,r){},e.prototype.componentDidShow=function(){},e.prototype.componentDidHide=function(){},e}(),propsMap=function(){function e(){this._map={}}return e.prototype.set=function(e,t){void 0===e&&(e={}),this._map[t]=e},e.prototype.getProps=function(e){return this._map[e]},e.prototype.deleteProps=function(e){delete this._map[e]},e.prototype.clear=function(){this._map={}},e}(),IntersectionObservationTarget=function(){function e(e,t){this._selector=e,this._callback=t}return e.prototype.invokeCallback=function(e){this._callback(e)},e}(),IntersectionObserver=function(){function e(e,t,r){this._id=e,this._intersectionObserverModule=t,this._manager=r,this._observationTargets=[],this._defaultMargins={left:0,right:0,top:0,bottom:0}}return e.prototype.relativeTo=function(e,t){return this._intersectionObserverModule.relativeTo(this._id,e,t||this._defaultMargins),this},e.prototype.relativeToViewport=function(e){return this._intersectionObserverModule.relativeToViewport(this._id,e||this._defaultMargins),this},e.prototype.observe=function(e,t){this._observationTargets.push(new IntersectionObservationTarget(e,t)),this._intersectionObserverModule.observe(this._id,e,this._observationTargets.length-1)},e.prototype.disconnect=function(){this._intersectionObserverModule.disconnect(this._id),this._manager.removeObserver(this._id)},e.prototype.invokeCallback=function(e,t){e<this._observationTargets.length&&this._observationTargets[e].invokeCallback(t)},e}(),IntersectionObserverManager=function(){function e(e){this._nativeModules=e,this._observerId=0,this._observers={},this._defaultOptions={thresholds:[0],initialRatio:0,observeAll:!1}}return e.prototype.createIntersectionObserver=function(e,t){var r=this._nativeModules.IntersectionObserverModule,n=new IntersectionObserver(this._observerId,r,this);return this._observers[this._observerId]=n,r.createIntersectionObserver(this._observerId,e,t||this._defaultOptions),this._observerId++,n},e.prototype.getObserver=function(e){return this._observers[e]},e.prototype.removeObserver=function(e){this._observers[e]=null},e}(),HookType,currentIndex,appInstance,options,currentHookType;function isFunctionComponent(e){return e&&e.$_isFunctionComponent}function getCurComponent(){return appInstance}function invokeOrReturn(e,t){return"function"==typeof t?t(e):t}function invokeCleanup(e){"function"==typeof e._cleanup&&e._cleanup()}function invokeEffect(e){e._cleanup=e._value()}function argsChanged(e,t){return!e||e.length!==t.length||t.some((function(t,r){return t!==e[r]}))}function getHookState(e){var t=getCurComponent(),r=t.__hooks||(t.__hooks={_list:[],_pendingEffects:[]});return e>=r._list.length&&r._list.push({_type:currentHookType}),currentHookType=HookType.none,r._list[e]}function mountHooks(e,t){appInstance=e,options=t||{}}function resetHooks(e){currentIndex=0,appInstance=e}function executeEffects(e){var t=e.__hooks;t&&(t._pendingEffects.forEach(invokeCleanup),t._pendingEffects.forEach(invokeEffect),t._pendingEffects=[])}function cleanUpHooks(e){if(e&&e.__hooks)try{e.__hooks._list.forEach(invokeCleanup)}catch(e){options.catchError(e)}}function useEffect(e,t){currentHookType=HookType.useEffect;var r=getCurComponent(),n=getHookState(currentIndex++);!options._skipEffects&&argsChanged(n._args,t)&&(n._value=e,n._args=t,r.__hooks._pendingEffects.push(n))}function useReducer(e,t,r){currentHookType===HookType.none&&(currentHookType=HookType.useReducer);var n=getCurComponent(),o=getHookState(currentIndex++);return o._reducer=e,o._component||(o._value=[r?r(t):invokeOrReturn(void 0,t),function(e){var t=o._reducer(o._value[0],e);o._value[0]!==t&&(o._value=[t,o._value[1]],o._component.setHookState())}],o._component=n),o._value}function useState(e){return currentHookType=HookType.useState,useReducer(invokeOrReturn,e,null)}function useMemo(e,t){currentHookType===HookType.none&&(currentHookType=HookType.useMemo);var r=getHookState(currentIndex++);return argsChanged(r._args,t)&&(r._value=e(),r._args=t,r._factory=e),r._value}function useCallback(e,t){return currentHookType=HookType.useCallback,useMemo((function(){return e}),t)}function useRef(e){return currentHookType=HookType.useRef,useMemo((function(){return{current:e,id:null}}),[])}function useInstance(){return getCurComponent()}function syncInsHookState(e,t,r){if(void 0===r&&(r=!1),e&&e.$_hookStateKeys&&"object"==typeof t){var n=e.$_hookStateKeys;n.length&&Object.keys(t).filter((function(e){return n.includes(e)})).forEach((function(o){var a=null;if(!r||!isNull(t[o])){var i=n.findIndex((function(e){return e===o}));if(-1!=i)(a=(e.__hooks&&e.__hooks._list?e.__hooks._list.filter((function(e){return e._type===HookType.useState||e._type===HookType.useReducer})):[])[i])&&(a._value[0]=t[o])}}))}}!function(e){e[e.none=0]="none",e[e.useState=1]="useState",e[e.useReducer=2]="useReducer",e[e.useEffect=3]="useEffect",e[e.useMemo=4]="useMemo",e[e.useCallback=5]="useCallback",e[e.useRef=6]="useRef"}(HookType||(HookType={}));var Hooks={useState:useState,useReducer:useReducer,useEffect:useEffect,useMemo:useMemo,useCallback:useCallback,useRef:useRef,mountHooks:mountHooks,cleanUpHooks:cleanUpHooks,executeEffects:executeEffects,resetHooks:resetHooks,syncInsHookState:syncInsHookState,useInstance:useInstance},ReactFcComponent=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.executeJSRender=function(){return Hooks.resetHooks(this),this._createData()},t.prototype.setHookState=function(){var e=this;this.batching||(this.batching=!0,this._reactAppInstance.resolvedPromise.then((function(){e.batching=!1,e.setHookStateInternal()})))},t.prototype.setHookStateInternal=function(){var e=this;try{var t=e.executeJSRender(),r=diffData(this.state,t);e.state=Object.assign(e.state,t),Object.keys(r).length&&this.updateDataToNative(r)}catch(t){var n=t||{},o=n.message,a=n.stack;reportThrowError({error:new InternalRuntimeError("setHookState error: "+o,a),nativeApp:e.nativeApp,rawError:t,proxy:void 0})}},t}(ReactComponent);function needPromisePolyfill(){return!0}function getPromiseMaybePolyfill(e,t,r){if(needPromisePolyfill()){var n=_global.getPromise;return"function"==typeof n?n({setTimeout:e,onUnhandled:t,clearTimeout:r}):_global.Promise}return _global.Promise}function disposeHeliumEventTarget(e,t){if(void 0===t&&(t=!1),e)try{var r=e;r.addEventListener&&(r.addEventListener=function(){}),r._lynxEventTypes&&r.removeAllListeners&&(r._lynxEventTypes.forEach((function(e){r.removeAllListeners(e)})),r._lynxEventTypes=null)}catch(e){t&&console.error(e)}}function disposeHeliumCanvas(e,t,r){if(void 0===r&&(r=!0),e){disposeHeliumEventTarget(e);try{var n=e,o=n.drawable;o&&t&&(t.canvases&&t.canvases[o]===n&&delete t.canvases[o],t.touchables&&t.touchables[o]===n&&delete t.touchables[o]),n.dispose&&(n.dispose(),n.dispose=null),n.getContext=null}catch(e){r&&console.error(e)}}}function disposeHeliumMedia(e,t){if(void 0===t&&(t=!1),e){disposeHeliumEventTarget(e);try{var r=e;r&&(r.stop&&r.stop(),r.src=null,r.srcObject&&(r.srcObject=null),r.setLynxSrc&&(r.setLynxSrc=null))}catch(e){t&&console.error(e)}}}function replaceHeliumEventTargetListenerFunction(e){if(e&&e.addEventListener){var t=e,r=t.addEventListener.bind(t);t.addEventListener=function(e,t){r(e,t),this._lynxEventTypes||(this._lynxEventTypes=new Set),this._lynxEventTypes.add(e)}}}function replaceHeliumCanvasGetContextFunction(e){if(e&&e.getContext){var t=e,r=t.getContext.bind(t);t.getContext=function(e,n){var o=r(e,n);if("webgl"!==e||!o||o._lynxAllocatedWebglData)return o;if(o._lynxAllocatedWebglData={textures:new Set,frameBuffers:new Set,renderBuffers:new Set,programs:new Set,shaders:new Set,buffers:new Set},t.dispose){var a=t.dispose.bind(t);t.dispose=function(){var e=o._lynxAllocatedWebglData;e.textures.forEach((function(e){o.deleteTexture(e)})),e.textures.clear(),e.frameBuffers.forEach((function(e){o.deleteFramebuffer(e)})),e.frameBuffers.clear(),e.renderBuffers.forEach((function(e){o.deleteRenderbuffer(e)})),e.renderBuffers.clear(),e.programs.forEach((function(e){o.deleteProgram(e)})),e.programs.clear(),e.shaders.forEach((function(e){o.deleteShader(e)})),e.shaders.clear(),e.buffers.forEach((function(e){o.deleteBuffer(e)})),e.buffers.clear(),a()}}var i=o.createTexture.bind(o);o.createTexture=function(){var e=i();return e&&o._lynxAllocatedWebglData.textures.add(e),e};var s=o.deleteTexture.bind(o);o.deleteTexture=function(e){return e&&o._lynxAllocatedWebglData.textures.delete(e),s(e)};var c=o.createFramebuffer.bind(o);o.createFramebuffer=function(){var e=c();return e&&o._lynxAllocatedWebglData.frameBuffers.add(e),e};var p=o.deleteFramebuffer.bind(o);o.deleteFramebuffer=function(e){return e&&o._lynxAllocatedWebglData.frameBuffers.delete(e),p(e)};var u=o.createRenderbuffer.bind(o);o.createRenderbuffer=function(){var e=u();return e&&o._lynxAllocatedWebglData.renderBuffers.add(e),e};var l=o.deleteRenderbuffer.bind(o);o.deleteRenderbuffer=function(e){return e&&o._lynxAllocatedWebglData.renderBuffers.delete(e),l(e)};var f=o.createProgram.bind(o);o.createProgram=function(){var e=f();return e&&o._lynxAllocatedWebglData.programs.add(e),e};var d=o.deleteProgram.bind(o);o.deleteProgram=function(e){return e&&o._lynxAllocatedWebglData.programs.delete(e),d(e)};var h=o.createShader.bind(o);o.createShader=function(e){var t=h(e);return t&&o._lynxAllocatedWebglData.shaders.add(t),t};var v=o.deleteShader.bind(o);o.deleteShader=function(e){return e&&o._lynxAllocatedWebglData.shaders.delete(e),v(e)};var y=o.createBuffer.bind(o);o.createBuffer=function(){var e=y();return e&&o._lynxAllocatedWebglData.buffers.add(e),e};var m=o.deleteBuffer.bind(o);return o.deleteBuffer=function(e){return e&&o._lynxAllocatedWebglData.buffers.delete(e),m(e)},o}}}function clearHeliumCanvas(e,t){void 0===t&&(t=!1);var r=e;if(r._heliumData)try{if(r._heliumData.medias&&r._heliumData.medias.forEach((function(e){disposeHeliumMedia(e)})),r._heliumData.onCanvases){var n=r._heliumData.onCanvases;for(var o in n){var a=n[o];a&&disposeHeliumCanvas(a.canvas,r._heliumData.scandium)}}if(r._heliumData.offCanvases&&r._heliumData.offCanvases.forEach((function(e){disposeHeliumCanvas(e,r._heliumData.scandium)})),r._heliumData.audioCtx)try{r._heliumData.audioCtx._unref()}catch(e){t&&console.error(e)}if(r._heliumData.hardware)try{r._heliumData.hardware.dispose()}catch(e){t&&console.error(e)}}catch(e){t&&console.error(e)}r._heliumData=null}function initHeliumCanvas(e,t){var r=e,n=r.lynx;if(!r._heliumData){r._heliumData={helium:null,scandium:null,aurum:null,medias:[],onCanvases:{},canvasIndex:0,offCanvases:new Set,audioCtx:null,hardware:null,effect:null,napi:null,amazing:null};var o=function(){return r._heliumData.helium||(r._heliumData.helium=r._nativeApp.heliumProxy())};n.helium=o;var a=function(){return r._heliumData.aurum||(r._heliumData.aurum=r._nativeApp.heliumProxy("Aurum"))};n.aurum=a;var i=function(){return r._heliumData.scandium||(r._heliumData.scandium=o().require("scandium"))},s=function(){return"?_lynxId="+(r._params?r._params.appGUID:"")};n.disposeAllCanvases=function(){clearHeliumCanvas(r)};var c=function(e,t,r,n){if(t>=2)r>0&&n>0&&(e.width=r,e.height=n);else{var o=1;(o=1==t?r:i().ratio)>0&&1!==o&&(e.width*=o,e.height*=o)}};n.createCanvas=function(e,t,n){if(!e)return null;var o=i(),a=++r._heliumData.canvasIndex,s=r._heliumData.onCanvases[e];s?(disposeHeliumCanvas(s.canvas,o),s={index:a,canvas:null,name:e}):s=r._heliumData.onCanvases[e]={index:a,canvas:null,name:e};var p=r._nativeApp.createCanvas(e);if(!p)return null;var u=i().touchables[p];return u?(s.canvas=u,replaceHeliumCanvasGetContextFunction(u),replaceHeliumEventTargetListenerFunction(u),c(u,arguments.length-1,t,n),u):null},n.createCanvasAsync=function(e,t,n,o,a){if(void 0===t&&(t=function(){}),void 0===n&&(n=function(){}),e&&t){var s=i(),p=++r._heliumData.canvasIndex,u=r._heliumData.onCanvases[e];u?(disposeHeliumCanvas(u.canvas,s),u={index:p,canvas:null,name:e}):u=r._heliumData.onCanvases[e]={index:p,canvas:null,name:e};var l=arguments.length-3;r._nativeApp.createCanvasAsync(e,(function(r){var i=s.touchables[r];i?u.index!==p?(disposeHeliumCanvas(i,s),n&&n("ignore old request")):(u.canvas=i,replaceHeliumCanvasGetContextFunction(i),replaceHeliumEventTargetListenerFunction(i),c(i,l,o,a),t(i)):n&&n("no touchables found for "+e)}))}else n&&n("missing name or onSuccess param")},n.getCanvasCreatedByName=function(e){if(e){var t=r._heliumData.onCanvases[e];if(t)return t.canvas}return null},n.createImage=function(e){var t=new(o().Image)(s());return replaceHeliumEventTargetListenerFunction(t),t.setLynxSrc=function(e){this.src=e},e&&(t.src=e),r._heliumData.medias.push(t),t},n.createVideo=function(e){var t=new(o().Video)(s());return replaceHeliumEventTargetListenerFunction(t),t.setLynxSrc=function(e){this.src=e},r._heliumData.medias.push(t),e&&(t.src=e),t},n.readFileSync=function(e,t){var r=i(),n=t&&t.encoding?r.LOAD_TEXT:r.LOAD_ARRAYBUFFER;return r.loadSync(e+s(),n)},n.readFile=function(e,t,n){var o=i(),a=n&&n.encoding?o.LOAD_TEXT:o.LOAD_ARRAYBUFFER;o.loadAsync(e+s(),a,(function(e){null!=r._nativeApp&&t&&t(e)}))},n.createOffscreenCanvas=function(e,t){var n=new(o().Canvas)(0,e>0?e:300,t>0?t:300);return n&&(replaceHeliumCanvasGetContextFunction(n),replaceHeliumEventTargetListenerFunction(n),r._heliumData.offCanvases.add(n)),n},n.createAudio=function(e){var t=new(0,a().Audio);return t._url_suffix=s(),t.setLynxSrc=function(e){this.src=e+this._url_suffix},r._heliumData.medias.push(t),e&&(t.src=e+t._url_suffix),t},n.getAudioContext=function(){var e=r._heliumData.audioCtx;if(!e){var t=a().AudioContext,n=(e=r._heliumData.audioCtx=new t)._ref;n&&n()}return e},n.getHardWareManager=function(){if(!r._heliumData.hardware){var e=r._nativeApp.heliumProxy("hardware").HardWareManager;r._heliumData.hardware=new e}return r._heliumData.hardware},n.getEffect=function(){var e=r._heliumData.effect;if(e||!r._nativeApp.validateEffect())return e;var t=o();return e={createFaceInfoConvertor:t.createAnimojiDetector,createFaceDetector:t.createFaceDetector,createAnimojiDetector:t.createAnimojiDetector,ab2AnimojiResult:t.ab2AnimojiResult,createHandDetector:t.createHandDetector,createHandInfoConvertor:t.createHandInfoConvertor,createSkeletonDetector:t.createSkeletonDetector,createSlamInfoConvertor:t.createSlamInfoConvertor,createSlamDetector:t.createSlamDetector}},n.napi=function(){return r._heliumData.napi||(r._heliumData.napi=r._nativeApp.heliumProxy("napi"))},n.getAmaz=function(){var e=r._heliumData.amazing;if(e)return e;var t=r._nativeApp.heliumProxy("effect_module");return t?(r._heliumData.amazing=e=n.napi().load(t),e):null};var p=function(e,t,n){e.media.request(e.media.AUDIO,(function(e){n&&(e&&e.success?n(t()):n(null,e&&e.errMsg?e.errMsg:"unknown"))})),null!=r._nativeApp&&r._nativeApp.onJSBridgeInvoked("helium","heliumRequestMicrophone")},u=function(e,t,n){var o=e.media,a=o.VIDEO,i=t.facingMode;"object"==typeof i&&(a|=o.EXACT,i=i.exact),"environment"!==i&&"back"!==i||(a|=o.BACK),t.beautify&&(a|=o.BEAUTIFY),t.landscape&&(a|=o.LANDSCAPE_RIGHT),t.animoji&&(a|=o.ANIMOJI),t.hand&&(a|=o.HAND),t.hairParser&&(a|=o.HAIRPARSE),t.matting&&(a|=o.MATTING),t.skeleton&&(a|=o.SKELETON),t.planeTrack&&(a|=o.PLANETRACK),t.sticker&&(a|=o.STICKER);var s=t.pageId||0;o.request(a,(function(e){n&&(e&&e.success?n(e):n(null,e&&e.errMsg?e.errMsg:"unknown"))}),s),null!=r._nativeApp&&r._nativeApp.onJSBridgeInvoked("helium","heliumRequestCamera")};n.getUserMedia=function(e,t,n){void 0===t&&(t=function(){}),void 0===n&&(n=function(){});var i=function(e,o){r._nativeApp&&e?t(e):n(o)};if(e&&e.video){var s=e.video instanceof Object?e.video:{};u(o(),s,i)}else if(e&&e.audio){var c=a().setupCapture;p(o(),c,i)}else n("error params")},n.requestMicrophone=function(){return new t((function(e,t){var n=a().setupCapture;p(o(),n,(function(n,o){null==r._nativeApp?t(new Error("Native app is released. !!!Please do not call any native related functions. ")):n?e(n):t(new Error(o))}))}))},n.pauseMicrophone=function(){var e=a().pauseCapture;e&&e()},n.resumeMicrophone=function(){var e=a().resumeCapture;e&&e()},n.requestCamera=function(e,n,a,i){return new t((function(t,s){var c=e instanceof Object?e:{};"environment"!==e&&"back"!==e||(c.facingMode=e),n&&(c.beautify=!0),a&&(c.animoji=!0),i&&(c.hand=!0),u(o(),c,(function(e,n){null==r._nativeApp?s(new Error("Native app is released. !!!Please do not call any native related functions. ")):e?t(e):s(new Error(n))}))}))}}}var defaultOption={};function initLoadDynamicComponentEnv(e,t){var r=e.lynx;r.loadDynamicComponent=function(e,n){return new t((function(t,o){r.fetchDynamicComponent(e,n||defaultOption,(function(e){e&&0==e.code?t(e):o(e)}))}))}}var ReactApp=function(){function ReactApp(e){var t=this;this.componentEventBatch={};var r=e.nativeApp,n=e.params,o=e.lynx;for(var a in this.modules={},this._apiList={},this._componentMap={},this._dynamicComponentMap={},this._componentInstance={},this._reactLynx={},this._nativeApp=r,this._params=n,this.rlynxVersion=null==n?void 0:n.rlynxVersion,this.globalErrorEvents=[],this._propsMap=new propsMap,this._reactLynx.propsMap=this._propsMap,this._reactLynx.genPropsId=genPropsId,this._reactLynx.ReactComponent=ReactComponent,this._reactLynx.createRef=function(){return{current:null,id:null}},this._getComponent=this.getComponent,this.setTimeout=r.setTimeout,this.setInterval=r.setInterval,this.clearInterval=r.clearInterval,this.clearTimeout=r.clearTimeout,this.NativeModules=r.nativeModuleProxy,this.NetworkingModule=r.nativeModuleProxy.NetworkingModule,this.LynxTestModule=r.nativeModuleProxy.LynxTestModule,this.BDLynxModule=r.nativeModuleProxy.BDLynxModule,this.nativeAppId=r.id,this.lynx={_switches:{}},this.lynx.onError=function(e){return t.subscribeGlobalError(e)},this.lynx.requireModule=this.requireModule.bind(this),this.lynx.requireModuleAsync=this.requireModuleAsync.bind(this),o)this.lynx[a]=o[a];this.lynx.setTimeout=this.setTimeout=this.wrapReport(r.setTimeout,"setTimeout Error"),this.lynx.setInterval=this.setInterval=this.wrapReport(r.setInterval,"setInterval Error"),this.lynx.clearInterval=this.clearInterval=r.clearInterval,this.lynx.clearTimeout=this.clearTimeout=r.clearTimeout,this.lynx.reportError=this.reportError.bind(this),this.GlobalEventEmitter=new EventEmitter(this.__internal__callNativeModule.bind(this)),this._lazyCallableModules=new Map,this._BDLynxAPIModule=new EventEmitter,this._intersectionObserverManager=new IntersectionObserverManager(this.NativeModules),this.setupPromise(r.setTimeout,r.clearTimeout),initHeliumCanvas(this,this.lynx.Promise),this.setupIntersectionApi(),Hooks.mountHooks(this,{catchError:function(e){var r=new InternalRuntimeError("Hooks: "+t._nativeApp.id+" error: "+e.message,e.stack);reportThrowError({error:r,nativeApp:t._nativeApp,rawError:e,proxy:t}),t.publishGlobalError(r,"Hooks: "+t._nativeApp.id+" error: "+e.message,e.stack)}}),this._reactLynx.ReactFcComponent=ReactFcComponent,this._reactLynx.useReducer=Hooks.useReducer,this._reactLynx.useState=Hooks.useState,this._reactLynx.useEffect=Hooks.useEffect,this._reactLynx.useMemo=Hooks.useMemo,this._reactLynx.useCallback=Hooks.useCallback,this._reactLynx.useInstance=Hooks.useInstance,this._reactLynx.useRef=Hooks.useRef,this._reactLynx.createRef=function(e){return{current:e,id:null}},this.lynx.setSharedData=function(e,t){_global.sharedData[e]=t;var r={};r[e]=t,_global.shareDataSubject.notifyDataChange(r)},this.lynx.triggerLepusGlobalEvent=function(e,t){r.triggerLepusGlobalEvent(e,t)},this.lynx.getSharedData=function(e){return _global.sharedData[e]},this.lynx.registerSharedDataObserver=function(e){_global.shareDataSubject.registerObserver(e)},this.lynx.removeSharedDataObserver=function(e){_global.shareDataSubject.removeObserver(e)},initLoadDynamicComponentEnv(this,this.lynx.Promise)}return ReactApp.prototype.subscribeGlobalError=function(e){this.globalErrorEvents.push(e)},ReactApp.prototype.publishGlobalError=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.globalErrorEvents&&this.globalErrorEvents.length>0&&this.globalErrorEvents.forEach((function(t){t.apply(void 0,__spreadArray([],__read(e)))}))},ReactApp.prototype.requireModule=function(e){if("string"!=typeof e||!e)throw new Error("importScript should load with one path");return this._nativeApp.loadScript(e),(0,_global.initBundle)({tt:this})},ReactApp.prototype.requireModuleAsync=function(e,t){var r=this;if("string"!=typeof e||!e)throw new Error("importScript async should load with one path");r._nativeApp.loadScriptAsync(e,(function(e){var n,o;e?n=new Error("loadScriptAsync: "+r._nativeApp.id+" error: "+e):o=(0,_global.initBundle)({tt:r});t&&t(n,o)}))},ReactApp.prototype.reportError=function(e){var t;if("[object Error]"===Object.prototype.toString.call(e))t=e;else{var r=void 0;r="string"!=typeof e?JSON.stringify(r):e,t=new Error(r)}var n=new UserRuntimeError(t.message,t.stack);reportError(n,this._nativeApp,{proxy:this}),this.publishGlobalError(n,t.message,t.stack)},ReactApp.prototype.setupPromise=function(e,t){var r=this,n=getPromiseMaybePolyfill(e,(function(e,t){try{if(t.stack||(t=new Error("wrapError-"+JSON.stringify(t))),t){var n=new UserRuntimeError("unhandled rejection: "+t.message,t.stack);reportError(n,r._nativeApp,{proxy:r}),r.publishGlobalError(n,"unhandled rejection: "+t.message,t.stack)}}catch(e){}}),t);this.resolvedPromise=n.resolve(),this.lynx.Promise=n},Object.defineProperty(ReactApp.prototype,"nativeApp",{get:function(){return this._nativeApp},enumerable:!1,configurable:!0}),Object.defineProperty(ReactApp.prototype,"params",{get:function(){return this._params},enumerable:!1,configurable:!0}),Object.defineProperty(ReactApp.prototype,"apiList",{set:function(e){this._apiList=__assign(__assign({},this._apiList),e)},enumerable:!1,configurable:!0}),ReactApp.prototype.Card=function(e){var t=this;try{var r=t._params||{},n=r.initData,o=r.updateData,a=r.initConfig;if(e.__config={$type:"card",appInstance:t,initData:n},t.appInstance=new e(e.defaultProps),n&&"object"==typeof n&&t.initCardData(n),o&&"object"==typeof o)try{var i=t.appInstance;Object.keys(o).forEach((function(e){i.state[e]=o[e]})),isFunctionComponent(i)&&Hooks.syncInsHookState(i,o)}catch(e){var s=e||{},c=s.message,p=s.stack;reportThrowError({error:u=new InternalRuntimeError("initCardData "+n+" error: "+(c="native updateCardData error in Card:  "+c),p),nativeApp:t._nativeApp,rawError:e,proxy:this}),t.publishGlobalError(u,"initCardData "+n+" error: "+c,p),t.dispatchError(c||p||"unknown error in updateCardState")}a&&"object"==typeof a&&t.processCardConfig(a)}catch(e){var u;reportThrowError({error:u=new InternalRuntimeError("create Card(): "+t._nativeApp.id+" error: "+e.message,e.stack),nativeApp:t._nativeApp,rawError:e,proxy:this}),this.publishGlobalError(u,"create Card(): "+t._nativeApp.id+" error: "+e.message,e.stack),this.dispatchError(e.message)}},ReactApp.prototype.Component=function(e){var t=_global.globDynamicComponentEntry,r=_global.globComponentRegistPath;t||(t=DEFAULT_ENTRY),this._componentMap[t]||(this._componentMap[t]={}),this._componentMap[t][r]=e},ReactApp.prototype.initCardData=function(e){var t=this;try{var r=t.appInstance;Object.keys(e).forEach((function(t){hasProperty(r.state,t)||(r.state[t]=e[t])}))}catch(r){var n=r||{},o=n.message,a=n.stack,i=new InternalRuntimeError("initCardData "+e+" error: "+(o="native initCardData error in ReactCard:  "+o),a);reportThrowError({error:i,nativeApp:t._nativeApp,rawError:r,proxy:this}),t.publishGlobalError(i,"initCardData "+e+" error: "+o,a),t.dispatchError(o||a||"unknown error in initCardData")}},ReactApp.prototype.processCardConfig=function(e){var t=this,r=t.appInstance;try{if(e&&"object"==typeof e){var n=e[CARD_CONFIG_STR];if(isObject(n)){var o=n.theme;isObject(o)&&(r[CARD_CONFIG_THEME]=o,"function"==typeof r[CARD_CONFIG_THEME_UPDATED]&&r[CARD_CONFIG_THEME_UPDATED](o))}}}catch(e){var a=new InternalRuntimeError("processCardConfig Card(): "+t._nativeApp.id+" error: "+e.message,e.stack);reportThrowError({error:a,nativeApp:t._nativeApp,rawError:e,proxy:this}),this.publishGlobalError(a,"processCardConfig Card(): "+t._nativeApp.id+" error: "+e.message,e.stack),this.dispatchError(e.message)}},ReactApp.prototype.onReactCardRender=function(e,t){var r=this,n=r.appInstance;if("string"==typeof e&&(e=JSON.parse(e)),n.$cardInit)try{var o=this.processVersionsAndCheckForConflict(e,n);if(e&&"object"==typeof e&&Object.keys(e).forEach((function(t){isNull(e[t])||(n.state[t]=e[t]),isFunctionComponent(n)&&Hooks.syncInsHookState(n,e,!0)})),o)return void this.flushNative(n);if(!t)return;var a={},i={};n.$hasDerivedFunction&&!n.$shouldIgnoreLepusDataProcessor&&(a=n.$class.getDerivedStateFromProps(n.props||{},n.state)||{},i=diffData(n.state,a),n.state=Object.assign(n.state,a));var s=n.executeJSRender()||{},c=diffData(n.state,s);n.state=Object.assign(n.state,s);var p=Object.assign(i,c);Object.keys(p).length&&n.updateDataToNative(p)}catch(t){var u=t||{};d=u.message,h=u.stack;reportThrowError({error:l=new InternalRuntimeError("onReactCardRender not first "+e+" error: "+d,h),nativeApp:r._nativeApp,rawError:t,proxy:this}),r.publishGlobalError(l,"onReactCardRender not first "+e+" error: "+d,h),r.dispatchError(d||h||"unknown error in onReactCardRender")}else try{n.$cardInit=!0,this.flushNative(n)}catch(t){var l,f=t||{},d=f.message,h=f.stack;reportThrowError({error:l=new InternalRuntimeError("onReactCardRender first "+e+" error: "+d,h),nativeApp:r._nativeApp,rawError:t,proxy:this}),r.publishGlobalError(l,"onReactCardRender first "+e+" error: "+d,h),r.dispatchError(d||h||"unknown error in onReactCardRender")}},ReactApp.prototype.onReactComponentCreated=function(e,t,r,n,o){var a,i;nativeConsole.profile("onReactComponentCreated::"+e),e.startsWith("/")&&(e=e.substr(1));var s=o?this._componentMap[o][e]:this._componentMap[DEFAULT_ENTRY][e];s.defaultProps=s.defaultProps||{};var c=(r?this._propsMap.getProps(r.propsId):null)||{},p=Object.keys(s.defaultProps),u=Object.keys(c),l=__spreadArray([],__read(p));u.forEach((function(e){l.includes(e)||l.push(e)}));var f=Object.keys(r),d=l.filter((function(e){return!f.includes(e)||null===r[e]})),h={};Object.keys(s.defaultProps).filter((function(e){u.includes(e)&&null===c[e]?h[e]=null:h[e]=s.defaultProps[e]}));var v=shallowMergeEx(r,c);v=shallowMergeEx(h,v,!0),s.__config={$type:"component",appInstance:this};var y=new s(v);n&&"object"==typeof n&&REACT_NATIVE_STATE_VERSION_KEY in n&&(y.$nativeStateVersion=n[REACT_NATIVE_STATE_VERSION_KEY]),y.componentPath=e,y.entryName=o,this.setComponent(t,y);var m=[];Object.keys(y.state).forEach((function(e){hasProperty(n,e)&&(null!==n[e]&&void 0!==n[e]||null===y.state[e]||void 0===y.state[e])||m.push(e)}));var _=null;y.$hasDerivedFunction&&(d.length||m.length||!y.$shouldIgnoreLepusDataProcessor)?(_=y.$class.getDerivedStateFromProps(y.props,y.state),y.state=Object.assign(y.state,_||{})):y.$hasDerivedFunction&&(y.state=shallowMergeEx(y.state,n,!0));var g=y.executeJSRender()||{};y.state=Object.assign(y.state,g);var E=diffData(n,_);m.push.apply(m,__spreadArray(__spreadArray([],__read(Object.keys(E))),__read(Object.keys(g))));for(var b={},A=0;A<m.length;A++){var x=m[A];b[x]=y.state[x]}y.updateDataToNative(filterReactComponentData(b));var C=this.componentEventBatch[t];if(C&&(this.componentEventBatch[t]=void 0,Array.isArray(C)))try{for(var w=__values(C),I=w.next();!I.done;I=w.next()){var R=I.value;this.publicComponentEvent(t,R.eventName,R.data)}}catch(e){a={error:e}}finally{try{I&&!I.done&&(i=w.return)&&i.call(w)}finally{if(a)throw a.error}}nativeConsole.profileEnd()},ReactApp.prototype.onReactComponentRender=function(e,t,r,n){var o,a=this.getComponent(e);nativeConsole.profile("onReactComponentRender::"+a.componentPath);var i,s=shallowClone(this._propsMap.getProps(t.propsId));i=(null===(o=this.lynx._switches)||void 0===o?void 0:o.fixMergeOrder)?shallowMergeEx(t,s):shallowMergeEx(s,t),Object.keys(i).forEach((function(e){a.props[e]=i[e]}));var c=this.processVersionsAndCheckForConflict(r,a);if(r&&"object"==typeof r&&Object.keys(r).forEach((function(e){isNull(r[e])||(a.state[e]=r[e]),isFunctionComponent(a)&&Hooks.syncInsHookState(a,r,!0)})),c)return this.flushNative(a),void nativeConsole.profileEnd();if(n){var p=Object.keys(s),u=Object.keys(t),l=p.filter((function(e){return nativeConsole.profileEnd(),!u.includes(e)||null===t[e]})),f={},d={};!a.$hasDerivedFunction||a.$shouldIgnoreLepusDataProcessor&&!l.length?a.$hasDerivedFunction&&(a.state=Object.assign(a.state,r||{})):(f=a.$class.getDerivedStateFromProps(a.props,a.state),d=diffData(a.state,f),a.state=Object.assign(a.state,f||{}));var h=a.executeJSRender()||{},v={};!a.$shouldDiffState&&isEmptyObject(f)||(v=diffData(a.state,h)),a.state=Object.assign(a.state,h||{});var y=Object.assign(d,v);Object.keys(y).length&&a.updateDataToNative(y),nativeConsole.profileEnd()}else nativeConsole.profileEnd()},ReactApp.prototype.processVersionsAndCheckForConflict=function(e,t){var r=!1;return e&&"object"==typeof e&&(REACT_NATIVE_STATE_VERSION_KEY in e&&(t.$nativeStateVersion=e[REACT_NATIVE_STATE_VERSION_KEY]),REACT_JS_STATE_VERSION_KEY in e&&e[REACT_JS_STATE_VERSION_KEY]<t.$jsStateVersion&&(r=!0),delete e[REACT_NATIVE_STATE_VERSION_KEY],delete e[REACT_JS_STATE_VERSION_KEY]),r},ReactApp.prototype.flushNative=function(e){var t={};e.$hasDerivedFunction&&(t=e.$class.getDerivedStateFromProps(e.props,e.state)),e.state=Object.assign(e.state,t||{}),e.state=Object.assign(e.state,e.executeJSRender()||{}),e.updateDataToNative(filterReactComponentData(e.state))},ReactApp.prototype.reactUpdateComponent=function(e){e.$init?e.$hasDidUpdateLifecycle&&(e.componentDidUpdate(e.prevProps,e.prevState),e.prevProps=deepClone(e.props),e.prevState=deepClone(e.state)):(e.$init=!0,e.componentDidMount(),e.$hasDidUpdateLifecycle&&(e.prevProps=deepClone(e.props),e.prevState=deepClone(e.state))),isFunctionComponent(e)&&Hooks.executeEffects(e)},ReactApp.prototype.onReactCardDidUpdate=function(){var e=this.appInstance;this.reactUpdateComponent(e)},ReactApp.prototype.onReactComponentDidUpdate=function(e){var t=this.getComponent(e);nativeConsole.profile("onReactComponentDidUpdate::"+t.componentPath),this.reactUpdateComponent(t),nativeConsole.profileEnd()},ReactApp.prototype.onReactComponentUnmount=function(e){var t=this.getComponent(e);nativeConsole.profile("onReactComponentUnmount::"+t.componentPath);var r=t.props?t.props.propsId:null;r&&this._propsMap.deleteProps(r),isFunctionComponent(t)&&Hooks.cleanUpHooks(t),t.componentWillUnmount(),t=null,delete this._componentInstance[e],nativeConsole.profileEnd()},ReactApp.prototype.onNativeAppReady=function(e){},ReactApp.prototype.callFunction=function(e,t,r){var n=this.appInstance;try{var o=n.getJSModule(e);"function"==typeof o[t]&&o[t].apply(o,r)}catch(r){var a=r||{},i=a.message,s=a.stack,c=new InternalRuntimeError("callFunction "+e+"/"+t+" error: "+i,s);reportThrowError({error:c,nativeApp:this._nativeApp,rawError:r,proxy:this}),this.publishGlobalError(c,"callFunction "+e+"/"+t+" error: "+i,s),this.dispatchError(i||s||"unknown error in callFunction")}},ReactApp.prototype.setComponent=function(e,t){this._componentInstance[e]=t,t.componentId=e},ReactApp.prototype.getComponent=function(e){return this._componentInstance[e]},ReactApp.prototype.getComponentOptions=function(e,t){return t?this._dynamicComponentMap[t][e]:this._dynamicComponentMap[DEFAULT_ENTRY][e]},ReactApp.prototype.setupIntersectionApi=function(){var e=this;this._apiList.createIntersectionObserver=function(t,r){var n=t.componentId,o=void 0===n?"":n;return e._intersectionObserverManager.createIntersectionObserver(o,r)},this.lynx.createIntersectionObserver=this._apiList.createIntersectionObserver},ReactApp.prototype.onIntersectionObserverEvent=function(e,t,r){var n=this._intersectionObserverManager.getObserver(e);n&&n.invokeCallback(t,r)},ReactApp.prototype.publishEvent=function(e,t){var r=this,n=r.appInstance;try{if("function"==typeof n[e])return void r.handlerEvent(n,e,t);throw new Error("Do not have "+e+"\n        handler in Card "+r._nativeApp.id)}catch(t){var o=t||{},a=o.message,i=o.stack,s=new InternalRuntimeError("publishEvent "+e+" error: "+a,i);reportThrowError({error:s,nativeApp:this._nativeApp,rawError:t,proxy:this}),r.publishGlobalError(s,"publishEvent "+e+" error: "+a,i),r.dispatchError(a||i||"unknown error in publishEvent")}},ReactApp.prototype.saveComponentEventBatch=function(e,t,r){this.componentEventBatch[e]||(this.componentEventBatch[e]=[]),this.componentEventBatch[e].push({eventName:t,data:r})},ReactApp.prototype.publicComponentEvent=function(e,t,r){var n=this,o=n.getComponent(e);if(o)try{"function"==typeof o[t]&&n.handlerEvent(o,t,r)}catch(r){var a=r||{},i=a.message,s=a.stack,c=new InternalRuntimeError("publicComponentEvent "+e+"/"+t+" error: "+i,s);reportThrowError({error:c,nativeApp:this._nativeApp,rawError:r,proxy:this}),n.publishGlobalError(c,"publicComponentEvent "+e+"/"+t+" error: "+i,s),n.dispatchError(i||s||"unknown error in publicComponentEvent")}else n.saveComponentEventBatch(e,t,r)},ReactApp.prototype.handlerEvent=function(e,t,r){var n=e,o=[],a=[],i={},s=r.type,c=r.currentTarget.dataset||{};r.preventDefault=function(){},r.stopPropagation=function(){},Object.keys(c).forEach((function(e){var t=e.toLocaleLowerCase();if(/^e/.test(t)&&(t=t.replace(/^e/,"")).indexOf(s)>=0){var r=t.replace(s,"");/^(a[a-z]|so)$/.test(r)&&(i[r]=c[e])}}));var p=null;"so"in i&&(n="this"!==i.so?i.so:e,p="this"!==i.so?i.so:null,delete i.so),isObject(i)&&(a=Object.keys(i).sort().map((function(e){return i[e]}))),o=-1===t.indexOf("funPrivate")?__spreadArray(__spreadArray([],__read(a)),[r]):__spreadArray(__spreadArray([p],__read(a)),[r]),e[t].apply(n,o)},ReactApp.prototype.callDestroyLifetimeFun=function(){var e=this;try{Object.keys(this._componentInstance).forEach((function(t){e.onReactComponentUnmount(t)})),this.appInstance.componentWillUnmount()}catch(e){}},ReactApp.prototype.destroy=function(){try{isFunctionComponent(this.appInstance)&&Hooks.cleanUpHooks(this.appInstance),this.modules=null,this._params=null,this._componentMap=null,this._propsMap=null,this.appInstance=null,this.GlobalEventEmitter=null,this._BDLynxAPIModule=null,this._lazyCallableModules=null,this._nativeApp=null,this.componentEventBatch=null,this._heliumData&&clearHeliumCanvas(this)}catch(e){}},ReactApp.prototype.onAppEnterBackground=function(e){var t=this;try{t.appInstance&&isFunction(this.appInstance.componentDidHide)&&t.appInstance.componentDidHide(e),this.GlobalEventEmitter.emit("onHide",e)}catch(e){var r=e||{},n=r.message,o=r.stack,a=new InternalRuntimeError("onAppEnterBackground error: "+n,o);reportThrowError({error:a,nativeApp:this._nativeApp,rawError:e,proxy:this}),t.publishGlobalError(a,"onAppEnterBackground error: "+n,o),t.dispatchError(n||o||"unknown error in onAppEnterBackground")}},ReactApp.prototype.onAppEnterForeground=function(e){var t=this;try{t.appInstance&&isFunction(this.appInstance.componentDidShow)&&t.appInstance.componentDidShow(e),this.GlobalEventEmitter.emit("onShow",e)}catch(i){var r=i||{},n=r.message,o=r.stack,a=new InternalRuntimeError("onAppEnterForeground "+e+" error: "+n,o);reportThrowError({error:a,nativeApp:this._nativeApp,rawError:i,proxy:this}),t.publishGlobalError(a,"onAppEnterForeground "+e+" error: "+n,o),t.dispatchError(n||o||"unknown error in onAppEnterForeground")}},ReactApp.prototype.onAppError=function(e){this.dispatchError(e);var t=new InternalRuntimeError("JS error from native: "+e,e);reportError(t,this._nativeApp,{proxy:this}),this.publishGlobalError(t,"onAppError, JS error from native: "+e,null)},ReactApp.prototype.dispatchError=function(e){this.appInstance&&isFunction(this.appInstance.componentDidCatch)&&this.appInstance.componentDidCatch(e)},ReactApp.prototype.onAppFirstScreen=function(e){},ReactApp.prototype.registerModule=function(e,t){this._lazyCallableModules[e]=t},ReactApp.prototype.__internal__callNativeModule=function(e,t,r){var n=this._nativeApp.nativeModuleProxy[e];if(n){var o=n[t];o&&Function.prototype.apply.call(o,void 0,r)}},ReactApp.prototype.wrapReport=function(e,t){var r=this;function n(e){return function(){for(var n=[],o=0;o<arguments.length;o++)n[o]=arguments[o];try{return e.apply(this,n)}catch(e){var a=new UserRuntimeError(t+": "+r._nativeApp.id+" error: "+e.message,e.stack);reportThrowError({error:a,nativeApp:r._nativeApp,rawError:e,proxy:r}),r.publishGlobalError(a,t+": "+r._nativeApp.id+" error: "+e.message,e.stack)}}}return function(t){for(var r=[],o=1;o<arguments.length;o++)r[o-1]=arguments[o];return Function.prototype.apply.call(e,void 0,__spreadArray([n(t)],__read(r)))}},ReactApp.prototype.require=function(path,params){var that=this;if("string"!=typeof path)throw new Error("require args must be a string");var entryName=params&&params.dynamicComponentEntry?params.dynamicComponentEntry:DEFAULT_ENTRY;that.modules[entryName]||(that.modules[entryName]={});var module=that.modules[entryName][path];if(!module){try{var tt=that,jsContent=that._nativeApp.readScript(path,params);eval(jsContent),module=that.modules[entryName][path]}catch(e){var throwError=new UserRuntimeError("eval user: "+that._nativeApp.id+" error: "+e.message,e.stack);reportThrowError({error:throwError,nativeApp:this._nativeApp,rawError:e,proxy:this}),that.publishGlobalError(throwError,"eval user: "+that._nativeApp.id+" error: "+e.message,e.stack)}if(!that.modules[entryName][path])throw new Error("module "+path+" in "+entryName+" is not defined in card: "+that._nativeApp.id)}if(!module.runed){var factory=module.factory,_module={exports:{}},res=void 0;if(module.runed=!0,module.exports=_module.exports,"function"==typeof factory){var inRequireCopy=inRequire.call(that,path),tt=that;res=factory(inRequireCopy,_module,_module.exports,that.Card.bind(tt),that.setTimeout,that.setInterval,that.clearInterval,that.clearTimeout,that.NativeModules,that._apiList,ttConsole,that.Component.bind(tt),that._reactLynx,that.nativeAppId,void 0,LynxJSBI,that.lynx),module.exports=_module.exports||res}}return module.exports},ReactApp.prototype.define=function(e,t,r){var n=this,o=r||DEFAULT_ENTRY;n.modules[o]||(n.modules[o]={}),this.modules[o][e]={runed:!1,factory:t.bind(n)}},ReactApp.prototype.bindComponentWithRefId=function(e,t,r){if("card"===e)this.appInstance.$pureData[r]=t,this.appInstance.bindSingleRef(r);else{var n=this._componentInstance[e];isObject(n)?(n.$pureData[r]=t,n.bindSingleRef(r)):(this.appInstance.$pureData[r]=t,this.appInstance.bindSingleRef(r))}},ReactApp}();function pathProcess(e){var t=e.match(/(.*)\/([^/]+)?$/);return(null==t?void 0:t[1])?t[1]:"./"}function inRequire(e){var t=this,r=pathProcess(e);return function(e){var n=[],o=(r+"/"+e).split("/"),a=o.length;if("string"!=typeof e)throw new Error("require args must be a string");for(var i=0;i<a;++i){var s=o[i];if(""!==s&&"."!==s)if(".."===s){if(0===n.length)throw new Error("can't find module "+e+" in app: "+t._nativeApp.id);n.pop()}else i+1<a&&".."===o[i+1]?i++:n.push(s)}var c=n.join("/");return c.endsWith(".js")||(c+=".js"),t.require(c)}}function parsePath(e){if("string"!==getDataType(e)){var t="path should be string";throw nativeConsole.error("TypeError",t),new AppServiceEngineKnownError(t)}for(var r=!1,n=!1,o=e.length,a=[],i="",s=0,c=0;c<o;c++){var p=e[c];if("\\"===p)c+1<o&&("."===e[c+1]||"["===e[c+1]||"]"===e[c+1])?(i+=e[c+1],c++):i+="\\";else if("."===p)i&&(a.push(i),i="");else if("["===p){if(i&&(a.push(i),i=""),0===a.length)throw nativeConsole.error("DataPathError","Path can not start with []: "+e),new AppServiceEngineKnownError("Path can not start with []: "+e);n=!0,r=!1}else if("]"===p){if(!r)throw nativeConsole.error("DataPathError","Must have number in []: "+e),new AppServiceEngineKnownError("Must have number in []: "+e);n=!1,a.push(s),s=0}else if(n){if(p<"0"||p>"9")throw nativeConsole.error("DataPathError","Only number 0-9 could inside []: "+e),new AppServiceEngineKnownError("Only number 0-9 could inside []: "+e);r=!0,s=10*s+p.charCodeAt(0)-48}else i+=p}if(n)throw nativeConsole.error("DataPathError","[] should appear in pair: "+e),new AppServiceEngineKnownError("[] should appear in pair: "+e);if(i&&a.push(i),0===a.length)throw nativeConsole.error("DataPathError","Path can not be empty"),new AppServiceEngineKnownError("Path can not be empty");return a}function getObjectByPath(e,t){for(var r={},n=void 0,o=parsePath(t),a=e,i=0;i<o.length;i++){if(Number(o[i]==o[i]&&o[i]%1==0)){if(!Array.isArray(a))throw nativeConsole.error("DataPathError', 'Expected Array but not. key: "+t),new AppServiceEngineKnownError("DataPathError', 'Expected Array but not. key: "+t)}else if("object"!==getDataType(a))throw nativeConsole.error("DataPathError', 'Expected Object but not. key: "+t),new AppServiceEngineKnownError("DataPathError', 'Expected Object but not. key: "+t);n=o[i],r=a,a=a[o[i]]}return{obj:r,key:n}}var BaseInstance=function(){function e(e){var t=e.type,r=e.componentId,n=void 0===r?"":r,o=e.resolvedPromise;this._pendingState=null,this._cbs=null,this._type=t,this._componentId=n,this.resolvedPromise=o}return e.prototype.nextTick=function(e){this.resolvedPromise.then(e)},e.prototype.updateData=function(e){for(var t in e){void 0===e[t]&&nativeConsole.error("setData field "+t+" to undefined not work");var r=getObjectByPath(this.data,t),n=r.obj,o=r.key;n&&(n[o]=deepClone(e[t]))}},e.prototype.dataQueueUpdate=function(e,t,r){var n=this,o=n._pendingState,a=e._queue;if(isNullOrUndef(o))n._pendingState=t;else for(var i in t)({}).hasOwnProperty.call(t,i)&&(o[i]=t[i]);a.includes(n)||a.push(n),isFunction(r)&&(Array.isArray(n._cbs)||(n._cbs=[]),n._cbs.push(r.bind(n))),e._microTaskPending||(e._microTaskPending=!0,this.nextTick((function(){var t,r=[];for(e._microTaskPending=!1;t=a.pop();){var n=t._type,o=t.componentId,i=t._cbs,s=t._pendingState,c=callbackMerge$1.bind(t,i);t._pendingState=null,t._cbs=null,r.push({type:n,componentId:o,data:s,callback:c})}e._nativeApp.batchedUpdateData(r)})))},e}();function callbackMerge$1(e){if(Array.isArray(e))for(var t=0,r=e.length;t<r;++t)e[t]()}var CreateApp=function(e){function t(t,r,n,o){var a=e.call(this,{type:"card",resolvedPromise:n})||this,i=a;a.__proxy=o,a.$parent=null,i.$children=[],i._lazyCallableModules=new Map,i._queue=[],i._microTaskPending=!1,i._nativeApp=r,a._options=t,i.data=t.data||{},delete t.data;var s=(_global.BDLynxSDKCore||{}).registerNativeEvent;i.theme=t.theme||{},delete t.theme;var c=Object.assign({},lifeCycleFun,t),p=t.methods||{};return Object.keys(p).forEach((function(e){"function"==typeof p[e]&&(i[e]=wrapUserFunction("at Card methods: "+e,i,p[e]).bind(i))})),Object.keys(c).forEach((function(e){"function"==typeof c[e]?i[e]=wrapUserFunction("at Card "+e,i,c[e]).bind(i):i[e]=deepClone(c[e])})),a.GlobalEventEmitter=new EventEmitter(a.__internal__callNativeModule.bind(a)),a.registerModule("GlobalEventEmitter",a.GlobalEventEmitter),a.registerModule("BDLynxAPIModule",new EventEmitter),"function"==typeof s&&s(i._lazyCallableModules.BDLynxAPIModule),a}return __extends(t,e),t.prototype.setData=function(t,r){var n=this;try{var o=getDataType(t);if("object"!==o)throw new Error("setData's first param must be object, you pass "+o);var a=getDataType(r);if(r&&"function"!==a)throw new Error("setData's second param must be function, you pass "+a);e.prototype.updateData.call(this,t),e.prototype.dataQueueUpdate.call(this,n,t,wrapUserFunction("at card setData/dataQueueUpdate",n,r).bind(n))}catch(e){var i=e||{},s=i.message,c=i.stack;reportError(new InternalRuntimeError("setData error: "+(s="setData err: "+s),c),n._nativeApp),n.onError(s)}},t.prototype.getNodeRef=function(e){return new NodeRef(this._nativeApp.nativeModuleProxy.LynxUIMethodModule,"",e)},t.prototype.getElementById=function(e){return new Element("card",e,this.__proxy.lynx)},t.prototype.getRoot=function(){return new Element("card",void 0,this.__proxy.lynx)},t.prototype.selectComponent=function(e,t){var r=this,n=getDataType(t);if(t&&"function"!==n)throw new Error("selectComponent's second param must be function, you pass "+n);this._nativeApp.selectComponent("card",e,!0,wrapUserFunction("at card selectComponent",this,(function(e){Array.isArray(e)&&t(r.__proxy.getComponent(e[0]))})).bind(this))},t.prototype.updateTheme=function(e,t){void 0===t&&(t=!1);var r=this;try{var n=getDataType(e);if("object"!==n)throw new Error("updateTheme's first param must be object, you pass "+n);var o={};t?Object.assign(o,e):Object.assign(o,r.theme,e),Object.keys(o).forEach((function(e){o[e]||delete o[e]})),r._nativeApp.updateData({__card_config_:{theme:o}})}catch(e){var a=e||{},i=a.message,s=a.stack;reportError(new InternalRuntimeError("updateTheme error: "+(i="updateTheme err: "+i),s),r._nativeApp),r.onError(i)}},t.prototype.registerModule=function(e,t){this._lazyCallableModules[e]=t},t.prototype.getJSModule=function(e){return this._lazyCallableModules[e]},t.prototype.addGlobalEventListener=function(e,t,r){this.getJSModule("GlobalEventEmitter").addListener(e,t,r)},t.prototype.setSharedData=function(e,t){_global.sharedData[e]=t},t.prototype.getSharedData=function(e){return _global.sharedData[e]},t.prototype.__internal__callNativeModule=function(e,t,r){var n=this._nativeApp.nativeModuleProxy[e];if(n){var o=n[t];o&&Function.prototype.apply.call(o,void 0,r)}},t}(BaseInstance);function optionProcess(e){return __assign({},e)}var behaviorBookmarks=new Map;function mixinBehaviors(e){var t={created:[e.created],attached:[e.attached],ready:[e.ready],moved:[e.moved],detached:[e.detached]};Array.isArray(e.behaviors)&&forEachRight(e.behaviors,(function(e){var r=behaviorBookmarks.get(e);r&&componentLifeCycles.forEach((function(e){"function"==typeof r[e]&&t[e].push(r[e])}))})),componentLifeCycles.forEach((function(r){e[r]=function(){for(var e=this,n=[],o=0;o<arguments.length;o++)n[o]=arguments[o];t[r].forEach((function(t){return t.apply(e,n)}))}}))}function createBehavior(e,t){var r=e||{},n=r.created,o=void 0===n?noop$1:n,a=r.attached,i=void 0===a?noop$1:a,s=r.ready,c=void 0===s?noop$1:s,p=r.moved,u=void 0===p?noop$1:p,l=r.detached,f=void 0===l?noop$1:l;e=__assign({},e);var d=Object.assign(e,{created:o,attached:i,ready:c,moved:u,detached:f}),h=__assign({},d);return mixinBehaviors(h),h}function registerBehavior(e){try{if(isObject(e)){var t=guid(),r=Object.keys(e).reduce((function(t,r){return componentLifeCycles.includes(r)&&"function"==typeof e[r]&&(t[r]=e[r]),t}),{});return behaviorBookmarks.set(t,r),t}}catch(e){var n=e||{},o=n.message,a=n.stack;reportError(new InternalRuntimeError("registerBehavior  "+o,a),this._nativeApp,{proxy:this}),this._appInstance.onError(o||a||"unknow error in registerBehavior")}}var Component=function(e){function t(t,r,n,o){var a=e.call(this,{type:"component",componentId:t,resolvedPromise:o})||this,i=a,s=deepClone(n),c=(s=createBehavior(s)).methods||{},p=s.pageLifetimes||{},u=s.lifetimes||{};i.$parent=null,i.$children=[],i._initDataUpdated=!1,i._appInstance=r.appInstance,i._proxyInstance=r,i.componentId=t,i.behaviors=s.behaviors||[],i._nativeApp=r.nativeApp,i._lifetimes=u,i._pageLifetimes=p,a.GlobalEventEmitter=r.appInstance.GlobalEventEmitter,isObject(s.data)||(s.data={}),isObject(s.properties)||(s.properties={});var l=s.data;for(var f in i._initData=__assign({},l),s.properties)l[f]=s.properties[f].value;return i.data=i.properties=l,i._properties=s.properties||{},Object.keys(c).forEach((function(e){"function"==typeof c[e]&&(i[e]=wrapUserFunction("at component methods "+e,i._appInstance,c[e]).bind(i))})),Object.keys(s).forEach((function(e){"function"==typeof s[e]&&(i[e]=wrapUserFunction("at component option "+e,i._appInstance,s[e]).bind(i))})),a}return __extends(t,e),t.prototype.getNodeRef=function(e){return new NodeRef(this._nativeApp.nativeModuleProxy.LynxUIMethodModule,this.componentId,e)},t.prototype.getNodeRefFromRoot=function(e){return new NodeRef(this._nativeApp.nativeModuleProxy.LynxUIMethodModule,"",e)},t.prototype.getElementById=function(e){return new Element(this.componentId,e,this._proxyInstance.lynx)},t.prototype.selectComponent=function(e,t){var r=this,n=getDataType(t);if(t&&"function"!==n)throw new Error("selectComponent's second param must be function, you pass "+n);this._nativeApp.selectComponent(this.componentId,e,!0,wrapUserFunction("at component selectComponent",this,(function(e){Array.isArray(e)&&t(r._proxyInstance.getComponent(e[0]))})).bind(this))},t.prototype.getJSModule=function(e){return this._appInstance._lazyCallableModules[e]},t.prototype.setData=function(t,r){var n=this,o=n.componentId,a=n._initData;try{var i=getDataType(t);if("object"!==i)throw new Error("setData's first param must be object, you pass "+i);var s=getDataType(r);if(r&&"function"!==s)throw new Error("setData's second param must be function, you pass "+s);n._initDataUpdated||(n._nativeApp.updateComponentData(o,a,null),n._initDataUpdated=!0),e.prototype.updateData.call(this,t),e.prototype.dataQueueUpdate.call(this,n._appInstance,t,wrapUserFunction("at Component setData",n._appInstance,r).bind(n))}catch(e){var c=e||{},p=c.message,u=c.stack;reportError(new InternalRuntimeError("Component "+(p="setData err: "+p),u),n._nativeApp,{proxy:n._proxyInstance}),n._appInstance.onError(p)}},t.prototype.triggerEvent=function(e,t,r){void 0===t&&(t={}),void 0===r&&(r={});var n=this;try{var o=n.componentId;n._nativeApp.triggerComponentEvent(e,{eventDetail:t,eventOption:r,componentId:o})}catch(e){var a=e||{},i=a.message,s=a.stack;reportError(new InternalRuntimeError("Component "+(i="triggerEvent error: "+i),s),n._nativeApp,{proxy:n._proxyInstance}),n._appInstance.onError(i)}},t}(BaseInstance);function componentActivity(e,t,r,n,o){var a=this,i=o||{},s=i.initData,c=i.entryName,p=i.parentId;try{if(!componentLifeCycles.includes(t))return;if("created"===t){n.startsWith("/")&&(n=n.substr(1));var u=a.getComponentOptions(n,c),l=null;if(!isObject(u))throw new Error("component: "+n+" is not exist!");try{l=new Component(r,a,u,e)}catch(e){throw new Error("create component error: "+e)}if(isObject(s)&&Object.keys(s).forEach((function(e){hasProperty(l.data,e)||(l.data[e]=s[e])})),isString(p)){var f=null;(f="card"===p?a.appInstance:a.getComponent(p))&&(l.$parent=f,f.$children.push(l))}a.setComponent(r,l)}var d=a.getComponent(r);if("attached"===t&&!d._initDataUpdated){var h=!0;a.allRemoved&&(h=!a.allRemoved[n]),h&&a._nativeApp.updateComponentData(r,d._initData,null),d._initDataUpdated=!0}if(!d)throw new Error("component instance: "+r+" is not exist");markComponentState(d,t);var v=(d._lifetimes||{})[t]||d[t];if("function"==typeof v&&v(o),"detached"===t){var y=d.$parent,m=(y||{}).$children;if(Array.isArray(m)){var _=[];m.forEach((function(e){e.componentId!==r&&_.push(e)})),y.$children=_}d.$parent=null}}catch(e){var g=e||{},E=g.message,b=g.stack;reportError(new InternalRuntimeError("componentActivity "+t+"/"+r+"/"+n+" error: "+e.message,e.stack),a._nativeApp,{proxy:this}),a._appInstance.onError(E||b||"unknow error in componentActivity")}}function markComponentState(e,t){"attached"===t?e.componentState="attached":"detached"===t?e.componentState="detached":"ready"===t?(e.componentState="ready",e.$_internal_shouldStopBatching=!0):"moved"===t?e.componentState="moved":"created"===t&&(e.componentState="created")}function pageLifetimeFun(e,t){void 0===t&&(t={});var r=this._componentInstance||{};Object.keys(r).forEach((function(n){var o=r[n],a=(o._pageLifetimes||{})[e];"function"==typeof a&&a.call(o,t)}))}var UpdateDataType={UPDATE:0,RESET:1},AppProxy=function(){function AppProxy(e){this.componentEventBatch={};var t=e.nativeApp,r=e.params,n=e.lynx;for(var o in this.modules={},this._apiList={},this._componentOpts={},this._componentInstance={},this._nativeApp=t,this._params=r,this.lynx={},n)this.lynx[o]=n[o];this.lynx.requireModule=this.requireModule.bind(this),this.lynx.requireModuleAsync=this.requireModuleAsync.bind(this),this.lynx.setTimeout=this.setTimeout=this.wrapReport(t.setTimeout,"setTimeout Error"),this.lynx.setInterval=this.setInterval=this.wrapReport(t.setInterval,"setInterval Error"),this.lynx.clearInterval=this.clearInterval=t.clearInterval,this.lynx.clearTimeout=this.clearTimeout=t.clearTimeout,this.NativeModules=t.nativeModuleProxy,this.NetworkingModule=t.nativeModuleProxy.NetworkingModule,this.LynxTestModule=t.nativeModuleProxy.LynxTestModule,this.BDLynxModule=t.nativeModuleProxy.BDLynxModule,this._intersectionObserverManager=new IntersectionObserverManager(this.NativeModules),this.nativeAppId=t.id,this.setupPromise(t.setTimeout,t.clearTimeout),this.lynx.Navigator=t.nativeModuleProxy.NavigationModule,initHeliumCanvas(this,this.lynx.Promise),this.setupInteralApi(),this.lynx.setSharedData=function(e,t){_global.sharedData[e]=t;var r={};r[e]=t,_global.shareDataSubject.notifyDataChange(r)},this.lynx.triggerLepusGlobalEvent=function(e,r){t.triggerLepusGlobalEvent(e,r)},this.lynx.getSharedData=function(e){return _global.sharedData[e]},this.lynx.registerSharedDataObserver=function(e){_global.shareDataSubject.registerObserver(e)},this.lynx.removeSharedDataObserver=function(e){_global.shareDataSubject.removeObserver(e)},initLoadDynamicComponentEnv(this,this.lynx.Promise)}return AppProxy.prototype.setupPromise=function(e,t){var r=this,n=getPromiseMaybePolyfill(e,(function(e,t){try{t.stack||(t=new Error("wrapError-"+JSON.stringify(t))),t&&reportError(new UserRuntimeError("unhandled rejection: "+t.message,t.stack),r._nativeApp,{proxy:r})}catch(e){}}),t);this.resolvedPromise=n.resolve(),this.lynx.Promise=n,this.lynx.reportError=this.reportError.bind(this)},AppProxy.prototype.wrapReport=function(e,t){var r=this;function n(e){return function(){for(var n=[],o=0;o<arguments.length;o++)n[o]=arguments[o];try{return e.apply(this,n)}catch(e){reportError(new UserRuntimeError(t+": "+r._nativeApp.id+" error: "+e.message,e.stack),r._nativeApp,{proxy:r})}}}return function(t){for(var r=[],o=1;o<arguments.length;o++)r[o-1]=arguments[o];return Function.prototype.apply.call(e,void 0,__spreadArray([n(t)],__read(r)))}},AppProxy.prototype.setupInteralApi=function(){var e=this;this._apiList.createIntersectionObserver=function(t,r){var n=t.componentId,o=void 0===n?"":n;return e._intersectionObserverManager.createIntersectionObserver(o,r)}},Object.defineProperty(AppProxy.prototype,"apiList",{set:function(e){this._apiList=__assign(__assign({},this._apiList),e)},enumerable:!1,configurable:!0}),Object.defineProperty(AppProxy.prototype,"appInstance",{get:function(){return this._appInstance},set:function(e){this._appInstance=e},enumerable:!1,configurable:!0}),Object.defineProperty(AppProxy.prototype,"nativeApp",{get:function(){return this._nativeApp},enumerable:!1,configurable:!0}),Object.defineProperty(AppProxy.prototype,"params",{get:function(){return this._params},enumerable:!1,configurable:!0}),AppProxy.prototype.setAllRemoved=function(e){this.allRemoved=e},AppProxy.prototype.reportError=function(e){var t;if("[object Error]"===Object.prototype.toString.call(e))t=e;else{var r=void 0;r="string"!=typeof e?JSON.stringify(r):e,t=new Error(r)}reportError(new UserRuntimeError(t.message,t.stack),this._nativeApp,{proxy:this})},AppProxy.prototype.requireModule=function(e){if("string"!=typeof e||!e)throw new Error("importScript should load with one path");return this._nativeApp.loadScript(e),(0,_global.initBundle)({tt:this})},AppProxy.prototype.requireModuleAsync=function(e,t){var r=this;if("string"!=typeof e||!e)throw new Error("importScript async should load with one path");r._nativeApp.loadScriptAsync(e,(function(e){var n,o;e?n=new Error("loadScriptAsync: "+r._nativeApp.id+" error: "+e):o=(0,_global.initBundle)({tt:r});t&&t(n,o)}))},AppProxy.prototype.require=function(path,params){var that=this;if("string"!=typeof path)throw new Error("require args must be a string");var entryName=_global.globDynamicComponentEntry?_global.globDynamicComponentEntry:DEFAULT_ENTRY;that.modules[entryName]||(that.modules[entryName]={});var module=that.modules[entryName][path];if(!module){try{var tt=that,jsContent=that._nativeApp.readScript(path,params);eval(jsContent),module=that.modules[entryName][path]}catch(e){reportError(new UserRuntimeError("eval user: "+that._nativeApp.id+" error: "+e.message,e.stack),that._nativeApp,{proxy:that})}if(!that.modules[entryName][path])throw new Error("module "+path+" in "+entryName+" is not defined in card: "+that._nativeApp.id)}if(!module.runed){var factory=module.factory,_module={exports:{}},res=void 0;if(module.runed=!0,module.exports=_module.exports,"function"==typeof factory){var inRequireCopy=inRequire$1.call(that,path),tt=that;res=factory(inRequireCopy,_module,_module.exports,that.Card.bind(tt),that.setTimeout,that.setInterval,that.clearInterval,that.clearTimeout,that.NativeModules,that._apiList,ttConsole,that.Component.bind(tt),_global.TaroLynx,that.nativeAppId,that.Behavior.bind(tt),LynxJSBI,that.lynx),module.exports=_module.exports||res}}return module.exports},AppProxy.prototype.define=function(e,t,r){var n=this,o=_global.globDynamicComponentEntry?_global.globDynamicComponentEntry:DEFAULT_ENTRY;n.modules[o]||(n.modules[o]={}),this.modules[o][e]={runed:!1,factory:t.bind(n)}},AppProxy.prototype.Card=function(e){var t=this,r=_global.globComponentRegistPath;this._cardPath=r;try{var n=t._params||{},o=n.initData,a=n.updateData,i=n.initConfig;t._appInstance=new CreateApp(e,t._nativeApp,this.resolvedPromise,t),t.lynx.getJSModule=t._appInstance.getJSModule.bind(t._appInstance),o&&"object"==typeof o&&t.initCardData(o),a&&"object"==typeof a&&t.updateCardData(a),i&&"object"==typeof i&&t.processCardConfig(i),t._appInstance.cardState="loaded",t._appInstance.onLoad({}),pageLifetimeFun.call(t,"onLoad")}catch(e){reportError(new InternalRuntimeError("create Card: "+t._nativeApp.id+" error: "+e.message,e.stack),t._nativeApp,{proxy:t}),t._appInstance.onError(e.message)}},AppProxy.prototype.Behavior=function(e){return registerBehavior.call(this,e)},AppProxy.prototype.Component=function(e){var t=_global.globDynamicComponentEntry,r=_global.globComponentRegistPath,n=optionProcess(e);t||(t=DEFAULT_ENTRY),this._componentOpts[t]||(this._componentOpts[t]={}),this._componentOpts[t][r]=n},AppProxy.prototype.setComponent=function(e,t){this._componentInstance[e]=t},AppProxy.prototype.getComponent=function(e){return this._componentInstance[e]},AppProxy.prototype.getComponentOptions=function(e,t){var r=null;try{r=t?this._componentOpts[t][e]:this._componentOpts[DEFAULT_ENTRY][e]}catch(t){throw new Error("Component ("+e+") is not register. \n please use Component({...}) to register.")}return r},AppProxy.prototype.callDestroyLifetimeFun=function(){try{pageLifetimeFun.call(this,"onDestroy"),this._appInstance.onDestroy()}catch(e){}},AppProxy.prototype.destroy=function(){try{this.modules=null,this._params=null,this._appInstance.cardState="destroyed",this._appInstance=null,this._nativeApp=null,this.resolvedPromise=null,this._heliumData&&clearHeliumCanvas(this)}catch(e){}},AppProxy.prototype.publishEvent=function(e,t){var r=this,n=r._appInstance,o=n._options[e];try{if("function"==typeof n[e])return void n[e](t);if("function"==typeof o)return void o.call(n,t);throw new Error("Do not have "+e+"\n        handler in Card "+r._nativeApp.id)}catch(t){var a=t||{},i=a.message,s=a.stack;reportError(new InternalRuntimeError("publishEvent "+e+" error: "+i,s),r._nativeApp,{proxy:r}),n.onError(i||s||"unknow error in publishEvent")}},AppProxy.prototype.publicComponentEvent=function(e,t,r){var n=this,o=n.getComponent(e);if(o&&o.$_internal_shouldStopBatching)try{"function"==typeof o[t]&&o[t](r)}catch(r){var a=r||{},i=a.message,s=a.stack;reportError(new InternalRuntimeError("publicComponentEvent "+e+"/"+t+" error: "+i,s),n._nativeApp,{proxy:n}),n._appInstance.onError(i||s||"unknow error in publicComponentEvent")}else n.saveComponentEventBatch(e,t,r)},AppProxy.prototype.onIntersectionObserverEvent=function(e,t,r){var n=this._intersectionObserverManager.getObserver(e);n&&n.invokeCallback(t,r)},AppProxy.prototype.onComponentActivity=function(e,t,r,n){var o,a;componentActivity.call(this,this.resolvedPromise,e,t,r,n);var i=this.getComponent(t);if(i&&i.$_internal_shouldStopBatching){var s=this.componentEventBatch[t];if(this.componentEventBatch[t]=void 0,Array.isArray(s))try{for(var c=__values(s),p=c.next();!p.done;p=c.next()){var u=p.value;this.publicComponentEvent(t,u.eventName,u.data)}}catch(e){o={error:e}}finally{try{p&&!p.done&&(a=c.return)&&a.call(c)}finally{if(o)throw o.error}}}},AppProxy.prototype.onComponentPropertiesChanged=function(e,t){var r=this,n=r.getComponent(e);try{if(!n)throw new Error("component is not exist, error in onComponentPropertiesChanged");var o=n.properties,a=[];isObject(t)&&(Object.keys(t).forEach((function(e){var r=o[e],i=t[e];r!==i&&(n.data[e]=n.properties[e]=i,a.push([r,i,e]))})),a.length>0&&a.forEach((function(e){var t=__read(e,3),r=t[0],o=t[1],a=t[2],i=n._properties[a]||{},s=i.observer;isObject(i)&&(isString(s)&&(s=n[s]),"function"==typeof s&&s.call(n,o,r))})))}catch(n){var i=n||{},s=i.message,c=i.stack;reportError(new InternalRuntimeError("onComponentPropertiesChanged "+e+"/"+t+" error: "+s,c),r._nativeApp,{proxy:r}),r._appInstance.onError(s||c||"unknow error in onComponentPropertiesChanged")}},AppProxy.prototype.onComponentDatasetChanged=function(e,t){var r=this,n=r.getComponent(e);try{if(!n)throw new Error("component is not exist, error in onComponentDatasetChanged");n.dataset=t}catch(n){var o=n||{},a=o.message,i=o.stack;reportError(new InternalRuntimeError("onComponentDataSetChanged "+e+"/"+t+" error: "+a,i),r._nativeApp,{proxy:r}),r._appInstance.onError(a||i||"unknow error in onComponentDataSetChanged")}},AppProxy.prototype.onComponentInstanceChanged=function(e,t){var r=this,n=r.getComponent(e);try{if(!n)throw new Error("component is not exist, error in onComponentInstanceChanged");n.className=t.className,n.idSelector=t.id}catch(n){var o=n||{},a=o.message,i=o.stack;reportError(new InternalRuntimeError("onComponentInstanceChanged "+e+"/"+t+" error: "+a,i),r._nativeApp,{proxy:r}),r._appInstance.onError(a||i||"unknow error in onComponentInstanceChanged")}},AppProxy.prototype.updateCardData=function(e,t){var r=this;void 0===t&&(t=UpdateDataType.UPDATE);var n=this;try{var o=n._appInstance;t==UpdateDataType.RESET&&(o.data={__globalProps:o.data.__globalProps},Object.keys(this._initData).forEach((function(e){o.data[e]=r._initData[e]}))),"string"==typeof e&&(e=JSON.parse(e)),Object.keys(e).forEach((function(t){var r=e[t];o.data[t]=r})),"function"==typeof o.onDataChanged&&o.onDataChanged.call(o,e)}catch(t){var a=t||{},i=a.message,s=a.stack;reportError(new InternalRuntimeError("updateCardData "+e+" error: "+i,s),n._nativeApp,{proxy:n}),n._appInstance.onError(i||s||"unknow error in updateCardData")}},AppProxy.prototype.processCardConfig=function(e){var t=this;try{var r=t._appInstance;"string"==typeof e&&(e=JSON.parse(e));var n=e.__card_config_;isObject(n)&&Object.keys(n).forEach((function(e){if("theme"===e){var t=n[e];isObject(t)&&(r.theme=t,"function"==typeof r.onThemeChanged&&r.onThemeChanged(t))}}))}catch(r){var o=r||{},a=o.message,i=o.stack;reportError(new InternalRuntimeError("processCardConfig "+e+" error: "+a,i),t._nativeApp,{proxy:t}),t._appInstance.onError(a||i||"unknow error in processCardConfig")}},AppProxy.prototype.initCardData=function(e){this._initData=e;var t=this;try{var r=t._appInstance;Object.keys(e).forEach((function(t){hasProperty(r.data,t)||(r.data[t]=e[t])}))}catch(r){var n=r||{},o=n.message,a=n.stack;reportError(new InternalRuntimeError("initCardData "+e+" error: "+(o="native initCardData error in Card:  "+o),a),t._nativeApp,{proxy:t}),t._appInstance.onError(o||a||"unknow error in initCardData")}},AppProxy.prototype.onNativeAppReady=function(e){var t=this;try{var r=!0;t.allRemoved&&(r=!t.allRemoved["/"+this._cardPath]),r&&t._nativeApp.updateData(t._appInstance.data),t._appInstance.cardState="ready",t._appInstance.onReady({}),pageLifetimeFun.call(t,"onReady")}catch(e){var n=e||{},o=n.message,a=n.stack;reportError(new InternalRuntimeError("onNativeAppReady error: "+o,a),t._nativeApp,{proxy:t}),t._appInstance.onError(o||a||"unknow error in updateCardData")}},AppProxy.prototype.callFunction=function(e,t,r){var n=this,o=this._appInstance;try{var a=o.getJSModule(e);"function"==typeof a[t]&&a[t].apply(a,r)}catch(r){var i=r||{},s=i.message,c=i.stack;reportError(new InternalRuntimeError("callFunction "+e+"/"+t+" error: "+s,c),n._nativeApp,{proxy:n}),n._appInstance.onError(s||c||"unknow error in callFunction")}},AppProxy.prototype.onAppEnterBackground=function(e){var t=this;try{t._appInstance.onHide(),pageLifetimeFun.call(t,"onHide")}catch(e){var r=e||{},n=r.message,o=r.stack;reportError(new InternalRuntimeError("onAppEnterBackground error: "+n,o),t._nativeApp,{proxy:t}),t._appInstance.onError(n||o||"unknow error in onAppEnterBackground")}},AppProxy.prototype.onAppEnterForeground=function(e){var t=this;try{t._appInstance.onShow(e),pageLifetimeFun.call(t,"onShow")}catch(a){var r=a||{},n=r.message,o=r.stack;reportError(new InternalRuntimeError("onAppEnterForeground "+e+" error: "+n,o),t._nativeApp,{proxy:t}),t._appInstance.onError(n||o||"unknow error in onAppEnterForeground")}},AppProxy.prototype.onAppError=function(e){var t=this;try{this._appInstance.onError(e),reportError(new InternalRuntimeError("JS error from native: "+e,e),t._nativeApp,{proxy:t})}catch(a){var r=a||{},n=r.message,o=r.stack;reportError(new InternalRuntimeError("onAppError "+e+" error: "+n,o),t._nativeApp,{proxy:t})}},AppProxy.prototype.onAppFirstScreen=function(e){var t=this;try{this._appInstance.onFirstScreen(e),pageLifetimeFun.call(t,"onFirstScreen")}catch(a){var r=a||{},n=r.message,o=r.stack;reportError(new InternalRuntimeError("onAppFirstScreen "+e+" error: "+n,o),t._nativeApp,{proxy:t}),t._appInstance.onError(n||o||"unknow error in onAppFirstScreen")}},AppProxy.prototype.saveComponentEventBatch=function(e,t,r){this.componentEventBatch[e]||(this.componentEventBatch[e]=[]),this.componentEventBatch[e].push({eventName:t,data:r})},AppProxy}();function pathProcess$1(e){var t=e.match(/(.*)\/([^/]+)?$/);return(null==t?void 0:t[1])?t[1]:"./"}function inRequire$1(e){var t=this,r=pathProcess$1(e);return function(e){var n=[],o=(r+"/"+e).split("/"),a=o.length;if("string"!=typeof e)throw new Error("require args must be a string");for(var i=0;i<a;++i){var s=o[i];if(""!==s&&"."!==s)if(".."===s){if(0===n.length)throw new Error("can't find module "+e+" in app: "+t._nativeApp.id);n.pop()}else i+1<a&&".."===o[i+1]?i++:n.push(s)}var c=n.join("/");return c.endsWith(".js")||(c+=".js"),t.require(c)}}function loadCard(nativeApp,params,lynx){var BDLynxSDKCore=_global.BDLynxSDKCore,apiInit=(BDLynxSDKCore||{}).apiInit,cardType=params.cardType,tt;try{var id=nativeApp.id;if(alog("load card native app id: "+id+" cardType "+cardType),tt="tt"===cardType?new AppProxy({nativeApp:nativeApp,params:params,lynx:lynx}):new ReactApp({nativeApp:nativeApp,params:params,lynx:lynx}),_global.currentAppId=id,_global.multiApps[id]=tt,"function"==typeof apiInit){var apiInstance=apiInit.call(tt);tt.apiList=apiInstance}var contents=nativeApp.readDynamicComponentScripts();if(Array.isArray(contents))for(var i=0;i<contents.length;i++)eval(contents[i]);else"string"==typeof contents&&eval(contents);var appServiceName="app-service.js";if(alog("load card native app load app-service.js params.bundleSupportLoadScript "+params.bundleSupportLoadScript),params.bundleSupportLoadScript){var bundleInitReturnObj=nativeApp.loadScript(appServiceName);if(alog("load card load app-service.js loadScript success"),bundleInitReturnObj&&bundleInitReturnObj.init)bundleInitReturnObj.init({tt:tt}),alog("load card load app-service.js init success");else{var errorMessage="loadCard error: loadScript did not return an function "+bundleInitReturnObj;reportThrowError({error:new InternalRuntimeError(errorMessage),nativeApp:nativeApp,rawError:new Error(errorMessage),proxy:tt})}}else{var jsContent=nativeApp.readScript(appServiceName);eval(jsContent),alog("load card load app-service.js eval success")}nativeApp.setCard(tt)}catch(e){var _a=e||{},message=_a.message,stack=_a.stack;reportThrowError({error:new InternalRuntimeError("loadCard error: "+message,stack),nativeApp:nativeApp,rawError:e,proxy:tt})}}function destroyCard(e){alog("destroy "+e),_global.multiApps[e].destroy(),delete _global.multiApps[e]}function callDestroyLifetimeFun(e){alog("callDestroyLifetimeFun "+e),_global.multiApps[e].callDestroyLifetimeFun()}function loadDynamicComponent(e,t){try{var r=e.nativeApp,n=r.loadScript("app-service.js",t);if(alog("load dynamic component app-service.js loadScript success"),n&&n.init){var o=_global.globDynamicComponentEntry;_global.globDynamicComponentEntry=t,n.init({tt:e}),alog("load dynamic component load app-service.js init success"),_global.globDynamicComponentEntry=o}else{var a="loadCard error: loadScript did not return an function "+n;reportThrowError({error:new InternalRuntimeError(a),nativeApp:r,rawError:new Error(a),proxy:e})}}catch(t){var i=t||{},s=i.message,c=i.stack;reportError(new InternalRuntimeError("loadDynamicComponent error: "+s,c),e.nativeApp,{proxy:e})}}for(var chars="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",lookup=new Uint8Array(256),i=0;i<chars.length;i++)lookup[chars.charCodeAt(i)]=i;function arrayBufferToBase64(e){var t,r=new Uint8Array(e),n=r.length,o="";for(t=0;t<n;t+=3)o+=chars[r[t]>>2],o+=chars[(3&r[t])<<4|r[t+1]>>4],o+=chars[(15&r[t+1])<<2|r[t+2]>>6],o+=chars[63&r[t+2]];return n%3==2?o=o.substring(0,o.length-1)+"=":n%3==1&&(o=o.substring(0,o.length-2)+"=="),o}function base64ToArrayBuffer(e){var t,r,n,o,a,i=.75*e.length,s=e.length,c=0;"="===e[e.length-1]&&(i--,"="===e[e.length-2]&&i--);var p=new ArrayBuffer(i),u=new Uint8Array(p);for(t=0;t<s;t+=4)r=lookup[e.charCodeAt(t)],n=lookup[e.charCodeAt(t+1)],o=lookup[e.charCodeAt(t+2)],a=lookup[e.charCodeAt(t+3)],u[c++]=r<<2|n>>4,u[c++]=(15&n)<<4|o>>2,u[c++]=(3&o)<<6|63&a;return p}_global.loadCard=loadCard,_global.destroyCard=destroyCard,_global.callDestroyLifetimeFun=callDestroyLifetimeFun,_global.loadDynamicComponent=loadDynamicComponent,_global.__lynxArrayBufferToBase64=arrayBufferToBase64,_global.__lynxBase64ToArrayBuffer=base64ToArrayBuffer,_global.LynxSDKCore={report:legacyReportError,reportInner:wrapInnerFunction,reportUser:wrapUserFunction}})();
//# sourceMappingURL=lynx_core.js.map
