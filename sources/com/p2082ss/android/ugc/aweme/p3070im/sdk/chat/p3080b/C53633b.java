package com.p2082ss.android.ugc.aweme.p3070im.sdk.chat.p3080b;

import android.app.Activity;
import android.os.Bundle;
import android.os.SystemClock;
import com.bytedance.common.utility.C13628n;
import com.bytedance.covode.number.Covode;
import com.bytedance.ies.p1208im.core.api.p1211b.AbstractC17420a;
import com.bytedance.ies.p1208im.core.api.p1211b.p1212a.AbstractC17425d;
import com.bytedance.ies.ugc.appcontext.C17867d;
import com.bytedance.ies.ugc.appcontext.C17873f;
import com.bytedance.p1399im.core.p1408d.C19536ag;
import com.bytedance.p1399im.core.p1408d.C19538ai;
import com.bytedance.p1399im.core.p1408d.C19587an;
import com.bytedance.p1399im.core.p1408d.C19593ar;
import com.bytedance.p1399im.core.p1408d.C19600ay;
import com.bytedance.p1399im.core.p1408d.C19638h;
import com.p2082ss.android.ugc.aweme.lancet.C58029j;
import com.p2082ss.android.ugc.aweme.p3070im.sdk.chat.data.C53709a;
import com.p2082ss.android.ugc.aweme.p3070im.sdk.chat.data.model.BaseExtra;
import com.p2082ss.android.ugc.aweme.p3070im.sdk.chat.p3080b.p3082b.C53638d;
import com.p2082ss.android.ugc.aweme.p3070im.sdk.chat.p3080b.p3083c.C53690h;
import com.p2082ss.android.ugc.aweme.p3070im.sdk.chat.p3080b.p3083c.EnumC53694i;
import com.p2082ss.android.ugc.aweme.p3070im.sdk.chatlist.controller.helper.C54881c;
import com.p2082ss.android.ugc.aweme.p3070im.sdk.common.controller.p3170a.C55050c;
import com.p2082ss.android.ugc.aweme.p3070im.sdk.common.controller.p3171b.C55059b;
import com.p2082ss.android.ugc.aweme.p3070im.sdk.common.controller.p3174e.C55076b;
import com.p2082ss.android.ugc.aweme.p3070im.sdk.common.controller.p3176g.C55126a;
import com.p2082ss.android.ugc.aweme.p3070im.sdk.common.controller.p3181j.C55154a;
import com.p2082ss.android.ugc.aweme.p3070im.sdk.common.controller.utils.C55214j;
import com.p2082ss.android.ugc.aweme.p3070im.sdk.common.controller.utils.C55235x;
import com.p2082ss.android.ugc.aweme.p3070im.sdk.common.controller.utils.p3186d.C55204a;
import com.p2082ss.android.ugc.aweme.p3070im.sdk.iescore.p3209b.C55638f;
import com.p2082ss.android.ugc.aweme.p3070im.sdk.notification.p3211a.C55654e;
import com.p2082ss.android.ugc.aweme.p3070im.sdk.share.p3234b.p3236b.C55956g;
import com.p2082ss.android.ugc.aweme.p3070im.service.AbstractC56220e;
import com.p2082ss.android.ugc.aweme.p3070im.service.IIMunder16Proxy;
import com.p2082ss.android.ugc.aweme.p3070im.service.p3263m.C56244a;
import com.p2082ss.android.ugc.aweme.utils.C80580in;
import com.p2082ss.android.ugc.trill.R;
import java.util.Iterator;
import java.util.List;
import java.util.Map;
import p4560f.p4561a.AbstractC88398aa;
import p4560f.p4561a.AbstractC88403ab;
import p4560f.p4561a.p4587h.C88925a;
import p4560f.p4561a.p4590k.C88946a;
import p4600h.p4611f.p4613b.C89219l;

/* renamed from: com.ss.android.ugc.aweme.im.sdk.chat.b.b */
public final class C53633b implements AbstractC17425d {

    /* renamed from: a */
    public static final C53633b f123055a = new C53633b();

    @Override // com.bytedance.ies.p1208im.core.api.p1211b.p1212a.AbstractC17425d, com.bytedance.p1399im.core.p1408d.AbstractC19674v
    /* renamed from: a */
    public final void mo27789a(int i, C19538ai aiVar) {
    }

    @Override // com.bytedance.ies.p1208im.core.api.p1211b.p1212a.AbstractC17425d, com.bytedance.p1399im.core.p1408d.AbstractC19674v
    /* renamed from: a */
    public final void mo27794a(C19538ai aiVar, boolean z) {
    }

    @Override // com.bytedance.ies.p1208im.core.api.p1211b.p1212a.AbstractC17425d, com.bytedance.p1399im.core.p1408d.AbstractC19674v
    /* renamed from: a */
    public final void mo27796a(List<C19538ai> list, int i, String str) {
    }

    @Override // com.bytedance.ies.p1208im.core.api.p1211b.p1212a.AbstractC17425d, com.bytedance.p1399im.core.p1408d.AbstractC19674v
    /* renamed from: a */
    public final void mo27797a(List<C19538ai> list, Map<String, ? extends Map<String, String>> map) {
    }

    @Override // com.bytedance.ies.p1208im.core.api.p1211b.p1212a.AbstractC17425d, com.bytedance.p1399im.core.p1408d.AbstractC19674v
    /* renamed from: a */
    public final void mo27798a(List<C19538ai> list, boolean z) {
    }

    @Override // com.bytedance.ies.p1208im.core.api.p1211b.p1212a.AbstractC17425d, com.bytedance.p1399im.core.p1408d.AbstractC19674v
    /* renamed from: b */
    public final void mo27799b(List<C19538ai> list, boolean z) {
    }

    private C53633b() {
    }

    static {
        Covode.recordClassIndex(63213);
    }

    @Override // com.bytedance.ies.p1208im.core.api.p1211b.p1212a.AbstractC17425d, com.bytedance.p1399im.core.p1408d.AbstractC19674v
    /* renamed from: a */
    public final void mo27792a(C19538ai aiVar) {
        C19638h a;
        if (aiVar != null && aiVar.getConversationId() != null && (a = AbstractC17420a.C17421a.m32276a().mo27720a(aiVar.getConversationId())) != null && a.getLastMessage() == null) {
            C54881c.m100501e(a);
        }
    }

    @Override // com.bytedance.ies.p1208im.core.api.p1211b.p1212a.AbstractC17425d, com.bytedance.p1399im.core.p1408d.AbstractC19674v
    /* renamed from: a */
    public final void mo27791a(int i, C19587an anVar) {
        if (anVar != null) {
            C54881c.f125657b.mo91894a(anVar);
        }
    }

    @Override // com.bytedance.ies.p1208im.core.api.p1211b.p1212a.AbstractC17425d, com.bytedance.p1399im.core.p1408d.AbstractC19674v
    /* renamed from: a */
    public final void mo27793a(C19538ai aiVar, Map<String, ? extends List<? extends C19536ag>> map, Map<String, ? extends List<? extends C19536ag>> map2) {
        C54881c.f125657b.mo91893a(aiVar, map2, map);
    }

    @Override // com.bytedance.ies.p1208im.core.api.p1211b.p1212a.AbstractC17425d, com.bytedance.p1399im.core.p1408d.AbstractC19674v
    /* renamed from: a */
    public final void mo27795a(List<C19538ai> list, int i, C19593ar arVar) {
        IIMunder16Proxy under16Proxy;
        C89219l.m154721d(arVar, "");
        if (list == null) {
            C56244a.m102190b("GlobalMsgObserver", "onGetMessage extra msgSource=".concat(String.valueOf(i)));
            return;
        }
        C56244a.m102190b("GlobalMsgObserver", "onGetMessage extra list size =" + list.size() + " msgSource=" + i);
        C55126a.m100849a(list);
        C55654e.f126932b.mo92545a(list, i);
        C89219l.m154721d(list, "");
        if (C55050c.m100668a() && !C80580in.m139687c()) {
            AbstractC56220e b = C55076b.m100723b();
            if ((b == null || (under16Proxy = b.getUnder16Proxy()) == null || !under16Proxy.mo93022d()) && i == 0) {
                C56244a.m102190b("MediaPreloader", "onGetMessage from online");
                C53638d.m98895a(list);
            }
        }
    }

    @Override // com.bytedance.ies.p1208im.core.api.p1211b.p1212a.AbstractC17425d, com.bytedance.p1399im.core.p1408d.AbstractC19674v
    /* renamed from: a */
    public final void mo27790a(int i, C19538ai aiVar, C19600ay ayVar) {
        String str;
        BaseExtra baseExtra;
        Activity j;
        int i2;
        C56244a.m102190b("GlobalMsgObserver", "onSendMsg: ".concat(String.valueOf(i)));
        if (aiVar != null) {
            Map<String, String> localExt = aiVar.getLocalExt();
            if (localExt != null && !localExt.isEmpty()) {
                int msgStatus = aiVar.getMsgStatus();
                if (localExt.containsKey("s:send_response_check_msg")) {
                    try {
                        baseExtra = (BaseExtra) C55214j.m100957a(localExt.get("s:send_response_check_msg"), BaseExtra.class);
                    } catch (Exception unused) {
                        baseExtra = null;
                    }
                    if (msgStatus == 3 && baseExtra != null && (baseExtra.getStatusCode() == 7188 || baseExtra.getStatusCode() == 7187)) {
                        int statusCode = baseExtra.getStatusCode();
                        C89219l.m154721d(aiVar, "");
                        if (!C55154a.f126201b.contains(aiVar)) {
                            C55154a.f126201b.add(aiVar);
                        }
                        C17867d.m33078a();
                        if (!C58029j.f132253e || !C58029j.m104846b() || C58029j.m104847c()) {
                            C58029j.f132253e = C55154a.m100862a();
                        }
                        if (!C58029j.f132253e) {
                            C13628n.m24506a(C17867d.m33078a(), (int) R.string.dcq);
                        } else if (!C55154a.f126200a && (j = C17873f.m33102j()) != null) {
                            C55154a.f126200a = true;
                            AbstractC56220e b = C55076b.m100723b();
                            if (statusCode == 7188) {
                                i2 = 3059;
                            } else {
                                i2 = 3058;
                            }
                            b.popCaptcha(j, i2, new C55154a.C55155a());
                        }
                    }
                }
            }
            C89219l.m154721d(aiVar, "");
            if (aiVar.getMsgStatus() == 1) {
                C53709a aVar = C55059b.f126007a;
                if (aVar == null || aVar.getEnterFrom() != 11) {
                    str = "click";
                } else {
                    str = "click_push";
                }
                EnumC53694i iVar = EnumC53694i.REAL_MESSAGE;
                C89219l.m154721d(str, "");
                C89219l.m154721d(iVar, "");
                C53690h hVar = new C53690h(aiVar, str, iVar);
                AbstractC88398aa b2 = C88925a.m154180b(C88946a.f201991c);
                C89219l.m154716b(b2, "");
                C89219l.m154721d(b2, "");
                if (hVar.f123205a == null) {
                    C56244a.m102193e("message", "SendMessageParams report error,localMessage = null");
                } else {
                    AbstractC88403ab.m153602a(hVar.f123205a).mo142909a(b2).mo142915a(new C53690h.C53692b(hVar), C53690h.C53693c.f123209a);
                }
            } else if (aiVar.getMsgStatus() == 2 || aiVar.getMsgStatus() == 3) {
                C89219l.m154721d(aiVar, "");
                AbstractC88403ab.m153602a(aiVar).mo142909a(C88925a.m154180b(C88946a.f201991c)).mo142915a(new C55204a.C55205a(C55638f.f126899a.mo27858a(), SystemClock.uptimeMillis(), ayVar), C55204a.C55206b.f126275a);
            }
            C55956g.m101812a(aiVar);
            String localExtValue = aiVar.getLocalExtValue("process_id");
            if (localExtValue != null && localExtValue.length() != 0) {
                Iterator<Map.Entry<String, Bundle>> it = C55235x.f126323a.entrySet().iterator();
                while (it.hasNext()) {
                    if (C89219l.m154714a((Object) localExtValue, (Object) it.next().getValue().getString("process_id"))) {
                        it.remove();
                    }
                }
            }
        }
    }
}
